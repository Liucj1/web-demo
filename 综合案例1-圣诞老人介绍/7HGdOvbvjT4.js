/*!VERSION=3.4.4-disney.1*/
var TINGYUN=function(){function t(t,e){return Function.prototype.apply.apply(t,e)}function e(t,e){return function(){return t.apply(e,arguments)}}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e,r){var i,o=0;if(t)if(function(t){var e=!!t&&"length"in t&&t.length,r=n(t);return"function"!==r&&("array"===r||0===e||"number"==typeof e&&e>0&&e-1 in t)}(t))for(i=t.length;o<i&&!1!==e.call(t[o],t[o],o);o++);else for(o in t)if((r||Object.prototype.hasOwnProperty.call(t,o))&&!1===e.call(t[o],t[o],o))break;return t}var o=window.encodeURIComponent;function a(t){return o?o(t):t}function s(t){return function(e){return"Array"===t&&Array.isArray?Array.isArray(e):Object.prototype.toString.call(e)==="[object "+t+"]"}}var c=s("String"),u=s("Array"),d=s("Function"),f=s("Object"),l=s("Number"),p=s("Headers"),h=s("Request");function v(){this.events={}}v.prototype={on:function(t,e){var n=this;return c(t)?(n.events[t]||(n.events[t]=[])).push(e):u(t)&&i(t,(function(t){n.on(t,e)})),n},off:function(t,e){var n=arguments.length,r=this;if(0===n)return r.events={},r;var i=r.events[t];if(!i)return r;if(1===n)return r.events[t]=null,r;for(var o=i.length;o--;)if(i[o]===e){i.splice(o,1);break}return r},emit:function(t){var e=[].slice.call(arguments,1),n=this.events[t];return n&&i(n,(function(t){return t.apply(this,e)})),this},unshift:function(t,e){var n=this;return(n.events[t]||(n.events[t]=[])).unshift(e),n}};var m=[].slice;function g(t){var e=arguments.length;if(e<2||!t)return t;var n=m.call(arguments,1);return i(n,(function(e){i(e,(function(e,n){t[n]=e}))})),t}function y(t,e){for(var n=-1,r=0,i=null==t?0:t.length,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function b(t,e){return t?e?t.replace(/\{(\w+.?\w+)\}/g,(function(t,n){return e[n]||""})).replace(/\{(\d+)\}/g,(function(t,n){return e[n]||""})):t:""}var w=+new Date;function _(t,e,n){var r;if(null==t)return-1;var i=Object(t),o=i.length>>>0;if(0===o)return-1;var a=+n||0;if(Math.abs(a)===Infinity&&(a=0),a>=o)return-1;for(r=Math.max(a>=0?a:o-Math.abs(a),0);r<o;){if(r in i&&i[r]===e)return r;r++}return-1}function E(t){var e=!1;try{/\{\s+\[native code\]/.test(Function.prototype.toString.call(t))&&(e=!0)}catch(n){}return e}function x(t){return JSON.parse(t)}function T(t){return JSON.stringify(t)}function S(t){return c(e=t)&&null!=e&&("{"===e.charAt(0)&&"}"===e.charAt(e.length-1)||"["===e.charAt(0)&&"]"===e.charAt(e.length-1))?new Function("return "+t)():null;var e}var A,C,k=/([\"\\])/g,N=/\n/g,O="ARRAY",I="OBJECT_VALUE",R="__TY_MARK_OBJECT_VALUE_UNDEFINED__";function P(t,e){switch(n(t)){case"object":if(!t)return e===I?null:"null";if(t instanceof Array){var r=m.call(t);return i(r,(function(t,e){r[e]=P(t,O)})),"["+r.join(",")+"]"}if(t instanceof Date)return t.getTime().toString();var o="";return i(t,(function(t,e){if(!d(t)){var n=P(t,I);if(n!==R){var r=P(e,"OBJECT_KEY");o+=r+":"+n+","}}})),o&&(o=o.substr(0,o.length-1)),"{"+o+"}";case"string":return'"'+t.replace(k,"\\$1").replace(N,"\\n")+'"';case"number":return isNaN(t)?null:t;case"boolean":return t;case"function":return P(t.toString());case"undefined":return e===I?R:e===O?"null":"undefined";default:return'"undefined"'}}var D,L,j,H=window.JSON;function q(){}function B(){return+new Date}function M(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}}function U(t,e){return setTimeout(t,e||0,{__ty_ignore:!0})}function F(t){return t?c(t)?t.length:window.ArrayBuffer&&t instanceof ArrayBuffer?t.byteLength:window.Blob&&t instanceof Blob?t.size:t.length?t.length:0:0}D=H&&H.stringify,A=d(D)&&E(D)?x:S,C=function(){var t=H&&H.stringify;if(!d(t)||!E(t))return!1;var e=!0;try{i([Boolean,Number,String,Object,Array],(function(t){if(t.prototype.toJSON)return e=!1,!1}))}catch(n){}return e}()?T:P,window.addEventListener?(L=function(t,e,n,r){return t.addEventListener(e,n,r)},j=function(t,e,n){return t.removeEventListener(e,n)}):(L=function(t,e,n){return t.attachEvent("on"+e,n)},j=function(t,e,n){return t.detachEvent("on"+e,n)});var z=String.prototype.trim?function(t){return null==t?"":t.trim()}:function(t){return null==t?"":t.toString().replace(/^\s+/,"").replace(/\s+$/,"")},G=function(){function t(t){return t<0?NaN:t<=30?0|Math.random()*(1<<t):t<=53?(0|Math.random()*(1<<30))+(0|Math.random()*(1<<t-30))*(1<<30):NaN}function e(t,e){for(var n=t.toString(16),r=e-n.length,i="0";r>0;r>>>=1,i+=i)1&r&&(n=i+n);return n}return function(n){var r="-";return n&&(r=""),e(t(32),8)+r+e(t(16),4)+r+e(16384|t(12),4)+r+e(32768|t(14),4)+r+e(t(48),12)}}(),Y={},V={imageResources:[]},J={};var K={context:null,uniqueId:0,actions:[],opt_custom_param:null,unAssignedEvents:[],cpActions:[],recordingCpActions:!1,cpParent:null,cpRemain:{ajax:0,iframe:0},tryEndCpActionsFailed:!1,pfSent:!1,ajaxUniqueId:0,scope:null,enableLCPObserver:!0,recordingPageLoadEvent:!1,recentFinishedAjaxContext:null,pageLoadEventEnd:!1,nbsJsBridgeData:{},did:null,uid:null,plugins:{},pageActionData:null},W="load",X="unload",Q="beforeunload",$="pagehide",Z="readystatechange",tt="complete",et="4",nt="TINGYUN_COOKIE_VALUE",rt="TINGYUN_DATA",it="TY_BASE64",ot="common",at="event",st="ajax",ct="timer",ut="iframe",dt="pf",ft="crossPage",lt="jsError",pt="resource",ht="main",vt="quit",mt="finish",gt="timeout",yt="fetchStart",bt="requestStart",wt="responseStart",_t="responseEnd",Et="domContentLoadedEventStart",xt="domainLookupStart",Tt="domainLookupEnd",St="redirectStart",At="redirectEnd",Ct="connectStart",kt="connectEnd",Nt="secureConnectionStart",Ot="transferSize",It="encodedBodySize",Rt="decodedBodySize",Pt="nextHopProtocol",Dt="__ty_crs_page_events",Lt="__ty_event_patch_tag",jt="__ty_event_patch_disable",Ht="__ty_event_patch_id",qt="click",Bt="submit",Mt="spe",Ut="addEventListener",Ft="onProperty",zt="inline",Gt="FORM",Yt="__ty_xhr_hooked_type",Vt="TY_USER_ID",Jt="TY_SESSION_N_ID",Kt="TY_DEVICE_N_ID",Wt="__TY_SPE_STORE",Xt="route",Qt="__TY_ELEMENT_CB",$t="__tagFirstPaintTime",Zt="hashchange",te="popstate",ee="URL",ne="QH",re="QB",ie="RH",oe="RB",ae="lifecycle",se="action",ce="send",ue="init",de="page",fe="ajax",le="error",pe="userAction",he="beforeSend",ve="send",me="__ty_resource_load_bind_id",ge="xhr",ye="fetch",be="mPaaS_rpc",we="resource",_e="auto",Ee="immediateEvent",xe="TINGYUN_STORAGE",Te="AGENT_CONFIG",Se="GET",Ae="POST",Ce="http://mgw/",ke="userAction",Ne="xmlhttprequest",Oe="session",Ie="lcp",Re="fcp",Pe="init",De="console",Le="error",je="report",He={lifecycle:[ue],action:[de,fe,le,pe],send:[he,ve]},qe={};function Be(t,e){return"".concat(t,"_").concat(e||"default")}function Me(t){if(t&&f(t)){var e=t.type,n=t.name,r=t.handler,i=t.options;if(!(null==He[e]||n&&_(He[e],n)<0||!d(r)||i&&!f(i)))if(n===de&&K.pageActionData)Ye(t,{args:{actionData:K.pageActionData}});else{var o=Be(e,n);qe[o]||(qe[o]=[]),qe[o].push(t)}}}function Ue(t,e){Me({type:ae,name:t,handler:e})}function Fe(t,e,n){Me({type:se,name:t,handler:e,options:n})}function ze(t,e){Me({type:ce,name:t,handler:e})}function Ge(t){var e,n=t.type,r=t.name,o=t.args,a=t.scope,s=Be(n,r);if(qe[s])try{i(qe[s],(function(t){if(!1===Ye(t,{args:o,scope:a}))return e=!1,!1}))}catch(c){}return e}function Ye(t,e){var n,r=e.args,i=e.scope,o=r||{};i&&(o.scope=i);try{n=t.handler.call(i,o)}catch(a){}return n}function Ve(t){t=t||{},this._contexts=t.contexts||null,this._name=t.name,this._tags=null,this._metrics=null}function Je(){K.scope||(K.scope=new Ve({name:"ROOT"}))}function Ke(){Je(),K.scope.setContext.apply(K.scope,arguments)}function We(t,e,n){if(t&&e){n||(n="scope");var r=e?e.getData():null;return r&&(t[n]=r),t}}function Xe(){return Je(),K.scope}Ve.prototype.setContext=function(t,e){var n=this;t&&f(t)?i(t,(function(t,e){n._mergeContext(e,t)})):this._mergeContext(t,e)},Ve.prototype.setBreadcrumbs=function(t){if(t)if(this._breadcrumbs)try{this._breadcrumbs=this._breadcrumbs.concat(t)}catch(e){}else this._breadcrumbs=t},Ve.prototype.setTag=function(t,e){null!=t&&null!=e&&(this._tags||(this._tags={}),this._tags[t]=e)},Ve.prototype.setMetric=function(t,e,n){if(null!=t&&null!=e){this._metrics||(this._metrics={});var r={data:e};n&&(r.unit=n),this._metrics[t]=r}},Ve.prototype.setExtraContext=function(t){this.setContext("extra",t)},Ve.prototype.getContext=function(t){return null==t?this._contexts:null==this._contexts?null:this._contexts[t]},Ve.prototype.getData=function(){if(this._isEmptyScope())return null;var t={};return this._contexts&&(t.contexts=this._contexts),this._breadcrumbs&&(t.breadcrumbs=this._breadcrumbs),this._tags&&(t.tags=this._tags),this._metrics&&(t.metrics=this._metrics),t},Ve.prototype._isEmptyScope=function(){return null==this._contexts&&null==this._breadcrumbs&&null==this._tags&&null==this._metrics},Ve.prototype._mergeContext=function(t,e){null!=t&&null!=e&&(this._contexts||(this._contexts={}),f(this._contexts[t])&&f(e)?this._contexts[t]=g(this._contexts[t]||{},e):this._contexts[t]=e)},Ve.prototype.toJSON=function(){return undefined};var Qe,$e=window.Error,Ze=window.document,tn=window.XMLHttpRequest,en=window.location,nn=window.navigator,rn={},on={};function an(){try{Qe||(Qe=window.navigator.userAgent.substring(0,256))}catch(t){}return Qe}var sn=!/(MSIE [0-8].\d+)/.test(an())&&document.addEventListener,cn=/(MSIE [0-7].\d+)/.test(navigator.userAgent);function un(){return sn}var dn=[],fn=[];function ln(){return dn}function pn(){return fn}"onpagehide"in window?(dn=[$],fn=[W,$]):(dn=[X,Q],fn=[W,X,Q]);var hn=un()?function(t){return setTimeout(t,0,{__ty_ignore:!0})}:function(t){return setTimeout(t,0)};function vn(){return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.nbsBrowserAgent&&window.webkit.messageHandlers.nbsBrowserAgent.postMessage}function mn(){return"undefined"!=typeof nbsJsBridge&&nbsJsBridge.postMessage}function gn(t){return c(t)||(t=C(t)),t}var yn,bn="display:none";function wn(t,e){var n=t.url,r=t.data,i=t.callback,o=t.method,a=t.timeout,s=M(i),c=new XDomainRequest;c.__ign=!0,o=o||Ae,c.open(o,n),c.onload=function(){s(c.responseText),e(!0)},c.onerror=function(t){s(t),e(!1)},a&&(c.timeout=a),hn((function(){o===Ae?c.send(gn(r)):c.send()}))}function _n(t,e,n){var r=document.createElement(t);try{for(var i in e)r[i]=e[i]}catch(s){var o="<"+t;for(var a in e)o+=" "+a+'="'+e[a]+'"';o+=">",n||(o+="</"+t+">"),r=document.createElement(o)}return r}function En(t,e){var n=t.url,r=t.data,i=t.callback,o=_n("div",{style:bn}),a=_n("iframe",{name:"ty_form",width:0,height:0,style:bn}),s=_n("form",{style:bn,action:n,enctype:"application/x-www-form-urlencoded",method:"post",target:"ty_form"}),c=_n("input",{name:"data",type:"hidden"},!0);c.value=gn(r),s.appendChild(c),o.appendChild(a),o.appendChild(s),document.body.appendChild(o),s.submit();var u=M((function(t){i&&i(),document.body.removeChild(o),e(t)}));a.onreadystatechange=function(){a.readyState!==tt&&4!==a.readyState||u(!0)},a.onload=function(){u(!0)},a.onerror=function(){u(!1)}}function xn(t,e){var n=t.url,r=t.data,i=t.header,o=t.callback,a=t.method,s=t.timeout,c=M(o),u=new tn;try{u.__ign=!0,a=a||Ae;try{u.open(a,n,!0)}catch(f){return En(t,e)}for(var d in u.overrideMimeType&&u.overrideMimeType("text/html"),s&&(u.timeout=s),u.onreadystatechange=function(){4==u.readyState&&(c(u.responseText),e(200===u.status))},u.onerror=function(){c(),e(!1)},i)u.setRequestHeader(d,i[d]);a===Ae?u.send(gn(r)):u.send()}catch(f){e(!1)}}function Tn(t,e){var n=t.url,r=t.data,i=t.callback;try{var o=nn.sendBeacon(n,gn(r));i&&i(),e(o)}catch(a){e(!1)}}function Sn(t,e){var n={url:t,header:{"content-type":"text/plain;charset=UTF-8"},body:gn(e)};return gn({type:0,params:{ri:n}})}function An(t,e){var n=t.url,r=t.data,i=t.callback;try{window.webkit.messageHandlers.nbsBrowserAgent.postMessage(Sn(n,r))}catch(o){}i&&i(),e(!0)}function Cn(t,e){var n=t.url,r=t.data,i=t.callback;try{nbsJsBridge.postMessage(Sn(n,r))}catch(o){}i&&i(),e(!0)}function kn(){var t=this;this.size=100,this.queue=[],this.running=!1,this.post=null,this.callbackPost=null,this.canToggleToSendBeacon=!1,this.initSendingMethod(),L(window,$,(function(){t.canToggleToSendBeacon&&(t.post=Tn,on.initiator="beacon")}))}function Nn(t){yn&&yn.add(t)}function On(){this.xhrs=[],this.errs=[],this.resErrs=[],this.visibilities=[],this.clear=function(){this.xhrs=this.errs=this.resErrs=this.visibilities=[]},v.call(this)}function In(t){var e=t.url,n=t.body,r=t.type,i=t.callback;i=i||q;var o,a={url:e,body:n,type:r};try{o=Ge({type:ce,name:he,args:a})}catch(s){}!1!==o&&Nn({url:a.url,data:a.body,callback:function(){try{Ge({type:ce,name:ve,args:a}),i()}catch(s){}}})}kn.prototype.add=function(t){this.queue.length>=this.size||(this.queue.push(t),this.running||(this.running=!0,this.run()))},kn.prototype.run=function(){var t=this;this.handler(this.queue[0],(function(e){e?(t.queue.shift(),t.queue.length>0?t.run():t.running=!1):t.running=!1}))},kn.prototype.handler=function(t,e){var n=this.post;t.needPostCallback&&(n=this.callbackPost),n(t,M((function(t){e(t)})))},kn.prototype.initSendingMethod=function(){var t,e,n,r,i,o=!1;nn.sendBeacon&&(o=!0),e=xn,vn()?(t=An,o=!1,on.initiator="messageHandler"):mn()?(t=Cn,o=!1,on.initiator="jsBridge"):window.XDomainRequest?(t=e=wn,on.initiator="xdr"):(n=window.navigator.standalone,r=an().toLowerCase(),i=/safari/.test(r),/iphone|ipod|ipad/.test(r)&&!n&&!i||rn.appKey&&!vn()&&!mn()?(t=xn,o=!1,on.initiator="xhr"):cn?(t=En,on.initiator="form"):(t=xn,on.initiator="xhr")),t||(t=function(t,e){e(!0)},o=!1),this.canToggleToSendBeacon=o,this.post=t,this.callbackPost=e},g(On.prototype,v.prototype);var Rn=new On;Rn.on("send",In);var Pn=[];function Dn(t){Mn(t,Pn)}var Ln,jn,Hn,qn=[];function Bn(t){Mn(t,qn)}function Mn(t,e){var n="ok";if(!t)return n=e.length?e.join("\n"):n;e.push(t)}function Un(t){try{return(e=t)&&c(e)?A(e):e}catch(n){Dn(n&&n.message)}var e;return null}function Fn(t,e,n){if(null==t[e]||u(t[e]))u(t[e])?t[e].push(n):t[e]=n;else{var r=t[e];t[e]=[r],t[e].push(n)}}function zn(t){if(!t||!c(t))return"";var e,n=t.indexOf("?");return n>=0&&(e=t.substring(n+1)),e}function Gn(t){var e={};return t&&i(t.split("&"),(function(t){var n=t.split("="),r=Yn(n[0]),i=Yn(n[1]);if(c(i)&&window.isNaN(i)){var o=Un(i);null!=o&&(i=o)}r&&null!=i&&Fn(e,r,i)})),e}function Yn(t){try{return decodeURIComponent(t)}catch(e){}return null}function Vn(t){var e=[];return i(t,(function(t,n){var r=a(n)+"="+a(t);e.push(r)})),e.join("&")}function Jn(t,e){var n=Vn(e);return t+=(t.indexOf("?")>0?"&":"?")+n}Ln=function(t){try{return window.localStorage.getItem(t)}catch(e){}},jn=function(t,e){try{window.localStorage.setItem(t,e)}catch(n){}return e},Hn=function(t){try{window.localStorage.removeItem(t)}catch(e){}};var Kn=null;function Wn(t,e){if(null!=Kn&&d(Kn)){var n={type:1,params:{event_name:t}};e&&(n.params.data=e);try{Kn(C(n))}catch(r){}}}function Xn(){return K.did}function Qn(t){null!=t&&(K.did=t,jn(Kt,t))}function $n(){var t=K.uid;return t||((t=Ln(Vt))?(K.uid=t,t):null)}function Zn(t,e){e=e||{},null!=t&&(K.uid=t,e.noStore||jn(Vt,t),Wn("setUser",{id:K.uid}))}var tr,er="http:",nr="https:",rr={ref:document.URL,referrer:document.referrer,v:"3.4.4-disney.1",av:"3.4.4-disney.1",ua:(navigator||{}).userAgent};function ir(){return tr}function or(t){var e=g({},rr,function(){var t={did:Xn(),url:window.location.href},e=$n();e&&(t.uid=e);var n=window.TINGYUN_RELEASE&&window.TINGYUN_RELEASE.id;return n||(n=rn.releaseId),n&&(t.rid=n),t}(),t);return e.key||e.appKey||!e.token||(e.key=e.token),e}function ar(t){return{beacon:ir(),query:t=or(t)}}function sr(){rr.ref=document.URL,function(){try{return window.self!==window.top}catch(t){return!1}}()&&(rr.ifr=1),i(["id","key","appKey","token","env"],(function(t){rn[t]&&(rr[t]=rn[t])}))}var cr,ur,dr,fr,lr=function(){try{var t=G();return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(e){return!1}}(),pr={};function hr(t,e,n){if(pr.localStorage&&t&&e){var r=Un(Ln(xe));r||(r={}),e&&n?(r[t]||(r[t]={}),r[t][e]=n):r[t]=e,jn(xe,C(r))}}function vr(t,e){if(pr.localStorage&&t&&e){var n=Un(Ln(xe));if(n&&n[t])return n[t][e]}}pr.localStorage=lr,pr.getEntriesByName=window.performance&&d(window.performance.getEntriesByName),dr=Ze.createElement("div"),(fr=Ze.createElement("div")).style&&(fr.style.cssText="float:left;opacity:.5",pr.opacity="0.5"===fr.style.opacity,pr.cssFloat=!!fr.style.cssFloat,fr.style.backgroundClip="content-box",fr.cloneNode(!0).style.backgroundClip="",pr.clearCloneStyle="content-box"===fr.style.backgroundClip,(dr=Ze.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",fr.innerHTML="",dr.appendChild(fr),pr.boxSizing=""===fr.style.boxSizing||""===fr.style.MozBoxSizing||""===fr.style.WebkitBoxSizing,pr.reliableHiddenOffsets=function(){return null==cr&&((n=Ze.documentElement).appendChild(dr),fr.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",cr=!1,window.getComputedStyle&&(e=window.getComputedStyle(fr),cr="1%"!==(e||{}).top,(e||{}).marginLeft,(e||{width:"4px"}).width,fr.style.marginRight="50%",(e||{marginRight:"4px"}).marginRight,(t=fr.appendChild(Ze.createElement("div"))).style.cssText=fr.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",fr.style.width="1px",parseFloat((window.getComputedStyle(t)||{}).marginRight),fr.removeChild(t)),fr.style.display="none",(ur=0===fr.getClientRects().length)&&(fr.style.display="",fr.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(t=fr.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(ur=0===t[0].offsetHeight)&&(t[0].style.display="",t[1].style.display="none",ur=0===t[0].offsetHeight)),n.removeChild(dr)),ur;var t,e,n});var mr=65536,gr=6048e5;function yr(t,e){var n=F(C(e));if(!(n>mr)){var r={},o=function(){if(pr.localStorage)return Ln(xe)}(),a=Un(o);if(a&&a.AGENT_CONFIG)if(F(o)+n>mr){var s=[];i(a.AGENT_CONFIG,(function(t,e){if(!t||!e)return!0;t.lastUpdate&&B()-t.lastUpdate<gr&&s.push({time:t.lastUpdate,key:e,value:t})}));try{s.sort((function(t,e){return e.time-t.time}))}catch(u){}var c=n;i(s,(function(t){var e=F(C(t.value));if(c+e>mr)return!1;r[t.key]=t.value,c+=e}))}else i(a.AGENT_CONFIG,(function(t,e){if(!t||!e)return!0;t.lastUpdate&&B()-t.lastUpdate<gr&&(r[e]=t)}));r[t]=e,hr(Te,r)}}function br(t,e){if(function(t){return!!rn.configLoad&&!!pr.localStorage&&(!t||!t.config||B()-(t.lastUpdate||0)>6e4*rn.configLoadInterval)}(e)&&t){var n={v:"3.4.4-disney.1",_r:B()};rn.token&&(n.token=rn.token),rn.appKey&&(n.appKey=rn.appKey),Nn({url:"".concat(ir(),"/web-config?").concat(Vn(n)),method:Se,timeout:3e4,needPostCallback:!0,callback:function(e){var n=Un(e);if(n){var r=n.code,i=n.data;200===r&&f(i)&&yr(t,{lastUpdate:B(),config:i})}}})}}var wr={},_r=["domain","token","key","id","appKey","env","release","plugins"],Er=["common","page","ajax","jsError","operation","requestTracing","resource","configReload","replay","webVitals","enc","breadcrumbs"];function xr(t){var e={};if(t){var n=[ee,ne,re,ie,oe];i(t.split(""),(function(t,r){e[n[r]]="1"===t}))}return e}function Tr(t){return Cr(t,!0)}function Sr(t){return Cr(t,!1)}function Ar(t,e){return null!=t&&t>0?t:e}function Cr(t,e){return null!=t?1==t:e}function kr(t,e){return null!=t?t:e}function Nr(){i(rn.corsDomains,(function(t){return"*"!==t||(rn.apmEnableAllCorsDomains=!0,!1)}));var t=function(){var t;try{t=window.location.protocol}catch(r){}var e=rn.protocolDomainConfig;if(e&&(tr=t===nr?e.https:t===er?e.http:e.other||e.https),!tr){var n=rn.sendProtocol;n&&(t=n),t!==nr&&t!==er&&(t=nr),tr=t+"//"+rn.beacon}return tr}();return sr(),t}function Or(){return rn}function Ir(t,e){}function Rr(t){var e,n,r,o,a=function(t){var e;if(t)return t.appKey?e="APPKEY_"+t.appKey:t.token&&(e="TOKEN_"+t.token),e}(t),s=vr(Te,a)||{};e=t,n=s.config,e||(e={}),n||(n={}),i(_r,(function(t){var r=n[t]||e[t];r&&(wr[t]=r)})),i(Er,(function(t){wr[t]=g(wr[t]||{},e[t],n[t])})),g(rn,{beacon:kr(wr.domain),env:kr(wr.env),releaseId:kr(wr.release),id:kr(wr.id),key:kr(wr.key),appKey:kr(wr.appKey),token:kr(wr.token),console_debug:Sr(wr.common.debug),sessionMode:kr(wr.common.sessionMode,_e),sendProtocol:kr(wr.common.sendProtocol),protocolDomainConfig:kr(wr.common.protocolDomainConfig),optCustomParamRules:(r=wr.common.paramCollection,o={},i(r,(function(t){t&&_(o[t.type]||[],t.key)<0&&(o[t.type]=o[t.type]||[]).push(t.key)})),o),collectAllParam:xr(wr.common.collectAllParams),sendInterval:kr(wr.common.sendInterval,5e3),sendMaxLen:kr(wr.common.sendMaxLen,10),sendMaxSize:kr(wr.common.sendMaxSize,430080),routerEnable:Tr(wr.page.routerEnabled),routerMode:kr(wr.page.routerMode,"auto"),router_event_delay:Ar(wr.page.routerOperationDelay,500),collect_noajax_hashroute:Sr(wr.page.uploadNoAjaxHashRouter),fp_threshold:kr(wr.page.fpThreshold,2e3),fs_threshold:kr(wr.page.fsThreshold,4e3),dr_threshold:kr(wr.page.drThreshold,4e3),le_threshold:kr(wr.page.leThreshold,7e3),pageLoadDelay:Ar(wr.page.pageLoadDelay,500),lcpAsFs:Tr(wr.page.lcpAsFs),monitor_dom_mutation:Tr(wr.page.mutationEnabled),fs_resources:kr(wr.page.fsResources),hookAjax:Tr(wr.ajax.enabled),hookXhr:Tr(wr.ajax.xhrEnabled),hookFetch:Tr(wr.ajax.fetchEnabled),hookMPaas:Tr(wr.ajax.mPaaSEnabled),hook_xhr_setrequestheader:Tr(wr.ajax.hookXhrSetRequestHeader),ajaxBlacklist:kr(wr.ajax.ignoreUrls),jsErrorEnabled:Tr(wr.jsError.enabled),errorEnabled:Tr(wr.jsError.errorEnabled),unhandledrejectionEnabled:Tr(wr.jsError.unhandledrejectionEnabled),uploadEmptyFileErrors:Sr(wr.jsError.uploadEmptyFileErrors),catchAsyncCallback:Sr(wr.jsError.catchAsyncCallback),hook_auto_event:Tr(wr.operation.enabled),hook_inline_event:Tr(wr.operation.inlineEventEnabled),hookOnProperty:Tr(wr.operation.onPropertyEnabled),hookEventListener:Tr(wr.operation.eventListenerEnabled),monitorRage:Tr(wr.operation.rageClickEnabled),inline_event_associate_threshold:Ar(wr.operation.inlineEventThreshold,200),hook_cross_page:Tr(wr.operation.crossPageEnabled),eventResources:kr(wr.operation.itemUrls),eventResourcesIgnore:kr(wr.operation.ignoreItemUrls),eventTimeout:kr(wr.operation.timeout,6e4),resourceAssociateThreshold:Ar(wr.operation.resourceAssociationThreshold,100),resourceWaitTime:Ar(wr.operation.resourceAssociationWaitTime,1e4),x_server_switch:Tr(wr.requestTracing.enabled),serverTiming:Sr(wr.requestTracing.serverTimingEnabled),corsDomains:kr(wr.requestTracing.corsDomains),apmHeaders:kr(wr.requestTracing.apmHeaders),autoAddApmHeader:Sr(wr.requestTracing.autoAddApmHeader),monitorResources:kr(wr.resource.keyUrls),hook_iframe:Tr(wr.resource.iframeEnabled),configLoad:Tr(wr.configReload.enabled),configLoadInterval:Ar(wr.configReload.expire,10),replayEnabled:Sr(wr.replay.enabled),replaySampleRate:Ar(wr.replay.sampleRate,-1),replayReportInterval:Ar(wr.replay.uploadInterval,10),replayReportEveryEvents:Ar(wr.replay.uploadEveryEvents,100),replayOptions:kr(wr.replay.options,{}),webVitalsEnabled:Tr(wr.webVitals.enabled),webVitalsLCPEnabled:Tr(wr.webVitals.lcpEnabled),webVitalsFIDEnabled:Tr(wr.webVitals.fidEnabled),webVitalsCLSEnabled:Tr(wr.webVitals.clsEnabled),webVitalsTTFBEnabled:Tr(wr.webVitals.ttfbEnabled),webVitalsFCPEnabled:Tr(wr.webVitals.fcpEnabled),encEnabled:Sr(wr.enc.enabled),encMode:kr(wr.enc.mode),encPubKey:kr(wr.enc.pubKey),encReplayEnabled:Sr(wr.enc.replayEnabled),bcEnabled:Tr(wr.breadcrumbs.enabled),bcConsoleEnabled:Tr(wr.breadcrumbs.consoleEnabled),bcDomEnabled:Tr(wr.breadcrumbs.domEnabled),bcFetchEnabled:Tr(wr.breadcrumbs.fetchEnabled),bcXhrEnabled:Tr(wr.breadcrumbs.xhrEnabled),bcHistoryEnabled:Tr(wr.breadcrumbs.historyEnabled),bcNavigationEnabled:Tr(wr.breadcrumbs.navigationEnabled),bcMaxCacheSize:Ar(wr.breadcrumbs.maxCacheSize,200),bcParseConsoleParam:Sr(wr.breadcrumbs.parseConsoleParam)});var c,u=Nr();return{config:wr,configKey:a,storedConfig:s,valid:(c=u,(rn.token||rn.appKey||rn.key)&&c)}}function Pr(){return K.nbsJsBridgeData.sessionId}var Dr,Lr={};function jr(t,e){t&&d(e)&&(Lr[t]||(Lr[t]=[]),Lr[t].push(e))}function Hr(t,e){t&&Lr[t]&&0!==Lr[t].length&&i(Lr[t],(function(t){try{t(e)}catch(n){}}))}function qr(){return Dr}function Br(t){Dr=t[0],t[0]&&(rr.sid=t[0]),t[1]&&(rr.__s=+t[1])}function Mr(){return rn.sessionMode==_e&&pr.localStorage}function Ur(t){t&&3===t.length&&(jn(Jt,t.join("|")),Br(t))}function Fr(t,e){var n=qr(),r=B();t||(t=G());var i=[t,r,r];Ur(i);var o,a=qr();return Hr(Oe,{prev:n,current:a,init:e}),null!=Pr()&&(o=a,K.nbsJsBridgeData.sessionId=o),i}function zr(t){var e=function(){var t=Ln(Jt);if(t){var e=t.split("|");return e&&(e[1]=+e[1],e[2]=+e[2]),e}return null}(),n=!0,r=Pr();return(n=!(!e||3!==e.length||!e[0]||isNaN(e[1])||isNaN(e[2]))&&(null!=r?r===e[0]:B()-e[2]<=21e5&&B()-e[1]<=288e5))||Fr(r,t),{session:e,valid:n}}var Gr,Yr=new v,Vr=(r(Gr={},ot,"c"),r(Gr,at,"e"),r(Gr,st,"a"),r(Gr,ut,"i"),r(Gr,dt,"p"),r(Gr,lt,"j"),r(Gr,Ee,"event"),Gr),Jr=["ps","ss","rs"],Kr={size:0,q:[],options:null};function Wr(t,e,n){var r={msg:t,size:e,options:n};n.crossPage?Kr.q.unshift(r):Kr.q.push(r),Kr.size+=e,Kr.options?i(n,(function(t,e){if(null==Kr.options[e]||"query"!==e)Kr.options[e]=t;else{var r=Kr.options.query;i(n.query,(function(t,e){_(Jr,e)>-1?null==r[e]?r[e]=t:r[e]+=t:r[e]=t}))}})):Kr.options=n}function Xr(t){var e=We({type:ot,_debug:g(t||{},on)},Xe());return K.opt_custom_param&&(e.optCustomParam=K.opt_custom_param),e}function Qr(t,e){if(t&&t.type){(e=e||{}).query=e.query||{};var n=1===e.query.ps;try{e.cb&&(e.cb.call(null,t),delete e.cb)}catch(o){}var r=$r(t)+C(t),i=F(r);return Kr.size+i>=rn.sendMaxSize?(Zr({tr:"size"}),void Wr(r,i,e)):Kr.q.length+1>=rn.sendMaxLen?(Wr(r,i,e),void Zr({tr:"len"})):n?(Wr(r,i,e),void Zr({tr:"page"})):void Wr(r,i,e)}}function $r(t){var e=Vr[t.type];return e||(e=t.type),e}function Zr(t){if(0!==Kr.q.length){var e,n;Mr()&&(e=zr(!1),n=e.session,e.valid&&(n[2]=B(),Ur(n)));var r=Kr.q,o=Kr.options,a=o.requestInfo;a||(a=ar()),g(a.query,o.query||{},{__r:B()}),a.path="/action";var s=o.commonActionInfoMessage?o.commonActionInfoMessage:Xr(t),c=$r(s)+C(s),u=F(c),d=r,f=!1;if(Kr.size+u>=rn.sendMaxSize){for(var l=u,p=[];r.length>0;){var h=r[0];if(!h)break;var v=l+h.size;if(!(v<rn.sendMaxSize))break;p.push(r.shift()),l=v}p.length>0&&(d=p,f=!0)}a.data=[c],i(d,(function(t){t.msg&&a.data.push(t.msg)}));var m=function(t){var e=t.beacon,n=t.path,r=t.query;return Jn("".concat(e).concat(n),r)}(a),y=a.data.join("\n");Rn.emit("send",{url:m,body:y,type:"action"}),Kr.q=[],Kr.size=0,Kr.options=null,f&&i(r,(function(t){Wr(t.msg,t.size,t.options)}))}}var ti,ei,ni=[st,ct,ut,pt];function ri(t,e){i(t,(function(t){i(e,(function(e){t.cid===e.id&&(t.state||(t.state=e.state),e.items&&e.items.length>0&&(t.items=e.items))}))})),i(e,(function(t){ri(t.items,t.children)}))}function ii(t){var e;t=t||{},this.id=++K.uniqueId,this.parent=t.parent||null,this.children=[],this.name=t.name||"",this.type=t.type||at,this.subType=this.type===at?t.subType||"click":t.subType,this.items=[],this.remain=(e={},i(ni,(function(t){e[t]={current:0,children:0}})),e),this.s=t.s||B(),this.e=null,this.data=t.data,this.state="pending",this.crossPage=t.crossPage||!1,this.postComposer=[],this.endLock=t.endLock,this.registerTimeout(),this.closed=!1,this.isTimeout=!1,this.cleared=!1,this.stateChanged=!1,this.actionCount={ajax:this.type===st?1:0,iframe:this.type===ut?1:0},this.sent=!1,this.sendOptions={},this.spe=null,null!=this.parent&&this.parent.children.push(this),this.eventData=null,this.resource={handler:{},statistic:{},record:{timeout:[],error:[]}},this._ctx={}}function oi(t){var e=qr(),n={id:t||G(),time:B()};!function(t){Br([t.id,t.startTime])}(n);var r=qr();return Hr(Oe,{prev:e,current:r,init:!1}),n}function ai(){var t,e;Mr()&&(t=zr(!0),e=t.session,t.valid&&Ur(e))}function si(t){this.data=[],this.maxSize=t.maxSize}function ci(t){rn.bcEnabled&&t&&t.category&&(t.timestamp||(t.timestamp=B()),t.type||(t.type="default"),t.level||(t.level="info"),t.message||(t.message=""),ti.add(t))}function ui(){return window.TINGYUN&&window.TINGYUN.inited}function di(t){return ei.call(t)}function fi(t){var e={},n=t.split(":");if(!n)return e;if(1===n.length)e.filename=n[0],e.lineno=0,e.colno=0,e.resolveLevel=1;else if(n.length>=2){var r,i=n[n.length-1],o=n[n.length-2],a=!isNaN(+i),s=!isNaN(+o);a&&s?(r=2,e.lineno=+o,e.colno=+i,e.resolveLevel=3):a?(r=1,e.lineno=+i,e.colno=0,e.resolveLevel=2):(r=0,e.lineno=0,e.colno=0,e.resolveLevel=1),e.filename=(n.slice(0,n.length-r)||[]).join(":")}return e}function li(t){if(t){var e,n={};return i(t.split(/\n/),(function(t){var r=function(t){if(t&&(t=di(t))){var e;if(0===t.indexOf("at ")){var n=t.indexOf("("),r=t.indexOf(")");if(n>-1&&r>-1){var i=n+1;i>r&&(i=r);var o=t.substring(i,r);o&&(e=fi(o))}else{var a=t.split(" "),s=a[a.length-1];s&&(e=fi(s))}}else if(t.indexOf("@")>-1){var c=t.split("@");c[1]&&(e=fi(c[1]))}return e}}(t);if(!r)return!0;var i=r.resolveLevel;if(3===i){if(r.filename&&r.lineno>0&&r.colno>0)return e=r,!1}else n[i]||(n[i]=r)})),e||(e=n[2]||n[1]),e}}ii.prototype.end=function(t){var e;this.closed?!this.cleared&&rn.console_debug&&console.warn("Current context is already closed"):(t&&(this.actionCount.ajax+=t.actionCount.ajax,this.actionCount.iframe+=t.actionCount.iframe,function(t,e){i(t,(function(t){t.cid===e.id&&e.items&&e.items.length>0&&(t.items=e.items)}))}(this.items,t),this.updateRemain(-1,t.type)),this.endLock||(this.isNoRemain()||this.isTimeout)&&(this.e=B(),this.closed=!0,this.i&&clearTimeout(this.i),this.e-this.s>rn.eventTimeout&&(this.isTimeout=!0),this.setState(this.isTimeout?gt:mt),this.data&&(this.data.state=this.state),this.parent?this.parent.end(this):(this.isTimeout&&(this.isRemainMeaningfulAction()||this.isMeaningfulAction())?e=this.composeTimeoutActionData():this.isMeaningfulAction()&&(e=this.composeActionData()),e&&(this.eventData=e,this.spe&&this.buildEventDataWithSpe(),this.send()),K.context=null)))},ii.prototype.isNoRemain=function(t){t=t||{};var e=!0;return i(this.remain,(function(n,r){return!!(t.ignoreFields&&_(t.ignoreFields,r)>-1)||(n.current<=0&&(!!t.testCurrent||n.children<=0)?void 0:(e=!1,!1))})),e},ii.prototype.clear=function(){this.closed=!0,this.cleared=!0,this.i&&clearTimeout(this.i)},ii.prototype.isMeaningfulAction=function(){return this.actionCount.ajax>0||this.actionCount.iframe>0||this.type===dt},ii.prototype.isRemainMeaningfulAction=function(){return this.remain.ajax.current>0||this.remain.ajax.children>0||this.remain.iframe.current>0||this.remain.iframe.children>0},ii.prototype.timeout=function(){this.isTimeout=!0,this.setState(gt),this.end(null,!0)},ii.prototype.setData=function(t){this.data||(this.data={}),g(this.data,t||{})},ii.prototype.composeActionData=function(){var t=g({},this.data||{});return this.items&&this.items.length>0&&(t.items=(this.items||[]).slice()),{type:this.type,subType:this.subType,start:this.s,end:this.e,duration:this.e-this.s>0?this.e-this.s:0,data:t}},ii.prototype.composeTimeoutActionData=function(){return this.collectActionDataFromTop(),this.composeActionData()},ii.prototype.collectActionDataFromTop=function(){ri(this.items,this.children)},ii.prototype.collectCrossPageData=function(t){if(t||(t=[]),this.crossPage=!0,this.data&&(this.data.crossPage=!0),t.unshift(this.data),this.parent)return this.parent.collectCrossPageData(t);var e={type:this.type,subType:this.subType,start:this.s};return(this.isNoRemain()||1===this.children.length)&&this.clear(),{action:e,data:t,requestInfo:ar(),commonActionInfo:Xr(),fromUrl:rr.ref}},ii.prototype.canEnd=function(t){return!this.closed&&this.isNoRemain(g({testCurrent:!0},t))},ii.prototype.updateRemain=function(t,e){if(this.remain[e]){e||(e=st);var n=t||0;this.remain[e].current=this.remain[e].current+n;for(var r=this.parent;r;)r.remain[e].children=r.remain[e].children+n,r=r.parent}},ii.prototype.setState=function(t){return!this.stateChanged&&(this.state=t,this.stateChanged=!0,!0)},ii.prototype.current=function(){return K.context},ii.prototype.buildEventDataWithSpe=function(){if(this.spe&&this.eventData&&this.eventData.data){var t=this.spe.xhrs;this.spe.hasAjax=t&&t.length>0,delete this.spe.xhrs,this.eventData.data.spe=this.spe}},ii.prototype.setSpe=function(t){if(t)return this.spe=t,this.sent},ii.prototype.send=function(){var t=this;if(!this.sent){var e={};this.spe&&(e.query={ss:1},this.spe.type===Xt&&(e.query.rs=1)),this.postComposer.length>0&&i(this.postComposer,(function(e){e.call(null,t)})),this.setSendOptions(e),Qr(this.eventData,this.sendOptions),this.sent=!0}},ii.prototype.addResource=function(t,e){var n=this;if(t&&!t[me]){var r={start:e,name:t.src||"",type:t.nodeName?t.nodeName.toLowerCase():"",timeout:!1,load:!1,error:!1,finished:!1},i=G();t[me]=i,this.resource.handler[i]=r,this.addResourceStatstic("total",t.src),this.updateRemain(1,pt),r.timerId=U((function(){var e=n.resource.handler[i];e&&!e.finished&&(n.addResourceStatstic("timeout",t.src),e.timeout=!0,e.finished=!0,n.updateRemain(-1,pt),n.end())}),rn.resourceWaitTime),r.handler=function(e){var r=n.resource.handler[i];if(r&&!r.finished){clearTimeout(r.timerId),n.updateRemain(-1,pt);try{n.addResourceStatstic(e.type,t.src),r[e.type]=!0}catch(e){}r.finished=!0,n.end()}},0!==r.name.indexOf("data:image/")?(t.addEventListener("load",r.handler),t.addEventListener("error",r.handler)):r.handler({type:"load"})}},ii.prototype.addResourceStatstic=function(t,e,n){this.resource.statistic[t]||(this.resource.statistic[t]={}),this.resource.statistic[t][e]||(this.resource.statistic[t][e]=0),this.resource.statistic[t][e]+=n||1},ii.prototype.hasChildType=function(t){var e=!1;return i(this.children,(function(n){if(n.type===t)return e=!0,!1})),e},ii.buildImmediateAction=function(t,e,n,r){var i=g({type:t,state:"finish"},(r=r||{}).actionOptions||{});return e&&(i.subType=e),n&&(i.data=n),i.data&&(i.data.state=i.state),r.notSend||Qr(i,r.sendOptions),i},ii.getRootContext=function(t,e){if(!t&&!d(e))return null;for(;t;){if(null==t.parent&&e.call(null,t))return t;t=t.parent}return null},ii.containContext=function(t,e){if(!t&&!d(e))return!1;for(;t;){if(e.call(null,t))return!0;t=t.parent}return!1},ii.prototype.toJSON=function(){return undefined},ii.prototype.setSendOptions=function(t){this.sendOptions||(this.sendOptions={}),g(this.sendOptions,t)},ii.prototype.registerTimeout=function(){var t=this;null==this.parent&&this.type!==dt&&(this.i=U((function(){t.timeout()}),rn.eventTimeout))},ii.prototype.addPostComposer=function(t){this.postComposer.push(t)},si.prototype.add=function(t){t&&(this.data.length===this.maxSize&&this.data.shift(),this.data.push(t))},si.prototype.getAll=function(){return this.data},ei=String.prototype.trim?String.prototype.trim:function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};var pi=0,hi={},vi={};function mi(t){this.limit=t,this.reset()}mi.prototype={add:function(t,e){this.len>this.limit||this.get(t)||(this.c[t]=e,this.len++)},get:function(t){return this.c[t]},reset:function(){this.c={},this.len=0}};var gi=new mi(100);function yi(t,e,n,r,i,o,a,s,c){var u=this;u.id=t,u.time=B(),u.msg=e,u.lineno=r,u.colno=i,u.filename=n,u.count=1,u.stack=o&&o.stack||"",u.module=a,u.trigger=s||Le,u.error=o,u.category=c,u.fix();var d=function(t,e,n,r,i){return String(t)+String(e)+String(n)+String(r)+String(i)}(e,r,i,a,c),f=hi[d];u.ep=f?0:1,hi[d]=!0,u.fep=0,u.trace={},this.recordFileName()}function bi(){var t,e,n=(t=gi.c,e=[],i(t,(function(t){e.push(t.toObject())})),e);if(n&&n.length){var r=0;try{r=parseInt((B()-(V.pfStart||w))/1e3)}catch(a){}var o={fu:pi||pi++,os:r};ii.buildImmediateAction(lt,null,null,{actionOptions:g(o,{items:n})}),gi.reset()}}function wi(t,e,n,r,i,o,a){if(e||rn.uploadEmptyFileErrors){var s=i&&i.moduleId,c="js";try{a&&a.category&&("js"!==a.category&&"other"!==a.category||(c=a.category),delete a.category)}catch(h){}var u=function(t,e,n,r,i,o){return String(t)+String(e)+String(n)+String(r)+String(i)+String(o)}(e,t,n,r,s,c),d=gi.get(u);d?d.increase():(d=new yi(u,t,e,n,r,i,s,o,c),gi.add(u,d),Rn.errs&&Rn.errs.push(d));var f=d.initTraceInstance();d.triggerActionHook(f);var l=f.scope;if(a)try{if(l){var p=a;a.breadcrumbs?(l.setBreadcrumbs(a.breadcrumbs),p=a.contexts):a.contexts&&(p=a.contexts),l.setContext(p)}}catch(h){}return l.setBreadcrumbs(function(){if(ti){var t=ti.getAll();if(0!==t.length)return t}}()),d.trace[f.id]={time:f.time,scope:f.scope},f.id}}function _i(t,e,n){if(ui()&&rn.jsErrorEnabled&&t){var r=t.message||"",i=t.stack,o=t.fileName||"",a=t.lineNumber||0,s=t.columnNumber||0;if(i&&(!o||a<=0||s<=0)){var c=li(i);c&&(o=c.filename,a=c.lineno,s=c.colno)}return wi(r,o,a,s,{stack:i},n||je,e)}}function Ei(t){return d(t)?t.apply(this):t}function xi(t){if(ui()&&t&&f(t)){var e=t.name,n=t.msg,r=t.status,i=t.context,o=Ei(e),a=Ei(n),s=Ei(r),c=Ei(i),u={type:Ee,name:o,time:B()};u.name&&(a&&(u.msg=a),s&&(u.status=s),c&&f(c)&&(u.scope={contexts:c}),ii.buildImmediateAction(Ee,null,u),Wn("userEvent"))}}function Ti(t,e){var n;return t&&(n=!0,i(t,(function(){return n=!1}),e)),!!n}function Si(t){var e={},n=function(t){var e=zn(t);return{queryObj:Gn(e),queryString:e}}(t),r=n.queryObj,i=n.queryString;return r&&(e[1]=Oi(r,rn.optCustomParamRules[1],!0)),{optCustomParams:ki(e),operaAllParam:i}}yi.prototype={increase:function(){this.recordFileName(),this.count++},recordFileName:function(){var t=this.filename||"_";this.fep+=vi[t]?0:1,vi[t]=!0},fix:function(){var t=this.stack;if(t&&c(t)){t=t.split(/\n/);var e=[];i(t,(function(t,n){-1==t.indexOf("__ty_asyncWrap__")&&e.push(t)})),this.stack=e.join("\n")}},getErrorOverview:function(){var t=this;return{o:t.time,e:t.msg,l:t.lineno,c:t.colno,r:t.filename,ec:t.count,s:t.stack,m:t.module,ep:t.ep,fep:t.fep,tr:t.trigger,cat:t.category}},toObject:function(){var t=this.getErrorOverview(),e={};return i(this.trace,(function(t,n){e[n]=We({time:t.time},t.scope)})),t.trace=e,t},initTraceInstance:function(){return{id:G(),time:B(),scope:new Ve}},triggerActionHook:function(t){if(t){var e=g(this.getErrorOverview(),{id:t.id,o:t.time});Ge({type:se,name:le,args:{target:this.error,actionData:e},scope:t.scope}),e.id&&(t.id=e.id)}}};var Ai={};function Ci(t){return(t+="")&&t.substr(0,128)||""}function ki(t){var e={};return i(t,(function(t,n){Ti(t)||(e[n]=t)})),Ti(e)?void 0:e}function Ni(t,e){return i(e,(function(e,n){t[n]=g({},t[n]||{},e||{})})),t}function Oi(t,e,n){var r={};return t&&e&&e.length&&e.length>0&&i(e,(function(e){var o=t[e];if(null!=o)Fn(r,e,o);else if(n){var a=function(t,e){var n=t+"."+e;if(Ai[n])return Ai[n];var r=(e||"").split("."),o="";e&&0!==e.indexOf("[")&&(o=".");var a,s=t;i(r,(function(t,e){0===e&&(s+=o),t.indexOf("-")>-1&&0!==t.indexOf("[")&&t.indexOf("]")!==t.length-1?s+="['"+t+"']":s+=(e>0?".":"")+t}));try{a=new Function(t,"try{return "+s+";}catch(e){}return null;")}catch(c){a=q}return Ai[n]=a,a}("reqBody",e);null!=(o=a(t))&&Fn(r,e,o)}})),r}var Ii=!0,Ri={start:w,e:{}};function Pi(t){Ii&&t()}function Di(t,e){if(!e)try{e=window.performance.timing.navigationStart}catch(n){}return e||(e=w),Math.round((e||0)+(t||0))}function Li(t){try{return t>1e12}catch(e){}return!1}var ji=[];function Hi(t){var e=t.timeStamp;if(e)return(Li(e)?B():window.performance&&d(window.performance.now)?window.performance.now():B()-Di())-e}function qi(t){ji.push({cb:t})}function Bi(){L(window,"pageshow",(function(t){var e;t&&t.persisted&&(e=t,i(ji,(function(t){t.cb(e)})))}),!0)}var Mi={};function Ui(t,e){Mi[G()]={cb:t,once:e}}var Fi=-1;function zi(t){try{var e=[];i(Mi,(function(n,r){var i=n.cb,o=n.once;i&&i(t),o&&e.push(r)})),i(e,(function(t){delete Mi[t]}))}catch(t){}}function Gi(){Fi="hidden"===document.visibilityState?0:Infinity,Ui((function(t){var e=t.timeStamp;e&&(Fi=e)}),!0)}function Yi(){return Fi}function Vi(t){if(window.requestAnimationFrame)try{window.requestAnimationFrame((function(){try{window.requestAnimationFrame(t)}catch(e){}}))}catch(e){}else hn(t)}function Ji(t,e){try{if(!window.PerformanceObserver||_(window.PerformanceObserver.supportedEntryTypes,t)<0)return;if("first-input"===t&&!("PerformanceEventTiming"in window))return;var n=new PerformanceObserver((function(t){i(t.getEntries(),(function(t){e(t)}))}));return n.observe({type:t,buffered:!0}),n}catch(r){}}var Ki,Wi={};function Xi(t,e,n){if(e&&!(e<=0)){Wi[t]||(Wi[t]={value:0});var r=Wi[t];r.value=e,n&&(n.entry?(r.entries||(r.entries=[]),r.entries.push(n.entry)):n.entries&&(r.entries=n.entries))}}function Qi(t){t.startTime<Yi()&&Xi(Ie,t.startTime)}function $i(){try{if(!Ki)return;i(Ki.takeRecords(),(function(t){Qi(t)})),Ki.disconnect()}catch(t){}}function Zi(t){t||(t={});var e=t,n=e.wd,r=e.startTime;n||(n=window);var i=n.performance||{},o=i.timing;return r||(r=o&&o.navigationStart?o.navigationStart:w),g(t,{wd:n,performance:i,timing:o,startTime:r})}function to(t,e){var n,r=Zi(e),i=r.timing,o=r.startTime,a=r.ifr,s=0;i&&(s=i.domContentLoadedEventStart||i.domInteractive||i.domLoading||s,n=1),s<=0&&!a&&(Rn.domContentLoadedEventStart?(s=Rn.domContentLoadedEventStart,n=2):(s=Rn._end,n=3));var c=s-o;c<0&&(c=t.metric.fp,n=0),t.metric.dr=Math.round(c),t.debug.dr=n}var eo=0,no=0,ro=[];function io(t){var e;t||(t=window);try{e=t.performance&&t.performance.getEntriesByName&&t.performance.getEntriesByName("first-contentful-paint")[0]}catch(n){}return e}var oo,ao,so=null,co=[],uo={passive:!0,capture:!0},fo=["mousedown","keydown","touchstart","pointerdown"];function lo(t,e){try{if(so)return;so=e,oo=t,ao=B(),ho(j),vo()}catch(e){}}function po(t){try{if(!t.cancelable||!t.timeStamp)return;var e=(Li(t.timeStamp)?B():performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var n=function(){lo(t,e),i()},r=function(){i()},i=function(){try{j("pointerup",n,uo),j("pointercancel",r,uo)}catch(e){}};L("pointerup",n,uo),L("pointercancel",r,uo)}(e,t):lo(e,t)}catch(t){}}function ho(t){i(fo,(function(e){t(document,e,po,uo)}))}function vo(){if(!(oo<0||oo>=ao-w)){var t={entryType:"first-input",name:so.type,target:so.target,cancelable:so.cancelable,startTime:so.timeStamp,processingStart:so.timeStamp+oo,polyfill:!0};i(co,(function(e){e(t)})),co=[]}}function mo(){if(rn.webVitalsFIDEnabled){var t=function(t){try{if(t.startTime<Yi())Xi("fid",t.processingStart-t.startTime)}catch(e){}},e=Ji("first-input",t);e&&(Ui((function(){try{i(e.takeRecords(),(function(e){t(e)})),e.disconnect()}catch(n){}}),!0),qi((function(){!function(t){try{co=[],oo=-1,so=null,ho(L),co.push(t),vo()}catch(e){}}(t)})))}}function go(t){rn.webVitalsTTFBEnabled&&function(){try{if(!window.performance)return;var t=0;window.performance.getEntriesByType&&(t=window.performance.getEntriesByType("navigation")[0].responseStart),t<=0&&window.performance.timing&&(t=window.performance.timing.responseStart-window.performance.timing.navigationStart),t<=0&&(t=0),Xi("ttfb",t)}catch(e){}}();var e=Wi;if(e.fcp||delete e.cls,rn.webVitalsLCPEnabled||delete e.lcp,rn.webVitalsFCPEnabled||delete e.fcp,!Ti(e)){if(t)return e;var n={};return i(e,(function(t,e){n[e]={value:t.value}})),n}}function yo(t){var e=function(t){return Wi[t]}(t);return e?e.value:void 0}function bo(){if(rn.webVitalsEnabled&&un())try{(Ki=Ji("largest-contentful-paint",Qi))&&(i(["keydown","click"],(function(t){L(document,t,$i,{once:!0,capture:!0})})),Ui($i,!0),qi((function(t){Vi((function(){try{Xi(Ie,Hi(t))}catch(e){}}))}))),mo(),function(){if(rn.webVitalsCLSEnabled){var t=function(t){try{if(t.hadRecentInput)return;var e=ro[0],n=ro[ro.length-1];no&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(no+=t.value,ro.push(t)):(no=t.value,ro=[t]),no>eo&&(ro,Xi("cls",eo=no))}catch(r){}},e=Ji("layout-shift",t);e&&(Ui((function(){try{i(e.takeRecords(),(function(e){t(e)}))}catch(n){}})),qi((function(){eo=0,[],no=0,ro=[]})))}}(),function(){var t,e=function(e){try{if("first-contentful-paint"!==e.name)return;t&&t.disconnect(),e.startTime<Yi()&&Xi(Re,e.startTime)}catch(n){}},n=io();n?e(n):t=Ji("paint",e),qi((function(t){Vi((function(){try{Xi(Re,Hi(t))}catch(e){}}))}))}()}catch(t){}}function wo(t,e){var n,r=Zi(e),o=r.performance,a=r.timing,s=r.startTime,c=r.wd,u=r.ifr,d=0,f=0;if(u){var l=io(c);l&&(f=l.startTime)}else f=yo(Re);if(f>0?(d=f,n=1):o.getEntriesByName&&a?(d=a.domLoading,i(V.resources,(function(t){var e=o.getEntriesByName(t);if(1===e.length){var n=e[0].responseEnd;n>d&&(d=n)}})),d-=s,n=4):c.TINGYUN&&c.TINGYUN.__tagFirstPaintTime&&((d=c.TINGYUN.__tagFirstPaintTime-s)<0&&(d=0),n=5),!d||d<=0){if(c.chrome&&c.chrome.loadTimes){var p=c.chrome.loadTimes();p&&p.firstPaintTime&&(d=1e3*p.firstPaintTime-s,n=2)}else a&&a.msFirstPaint&&(d=a.msFirstPaint-s,n=3);(!d||d<=0)&&(d=0,n=0)}t.metric.fp=Math.round(d),t.debug.fp=n}function _o(t){return pr.reliableHiddenOffsets()?t.offsetWidth<=0&&t.offsetHeight<=0&&!t.getClientRects().length:function(t){for(;t&&1===t.nodeType;){if("none"===Eo(t)||"hidden"===t.type)return!0;t=t.parentNode}return!1}(t)}function Eo(t){return t.style&&t.style.display}function xo(t,e){var n=Zi(e),r=n.performance,o=n.timing,a=n.startTime,s=n.ifr,c=n.wd,u=t.metric.fp,f=u||0,l=5,p=0;if(s||(p=yo(Ie)),rn.lcpAsFs&&p>0)f=p,l=1;else if(!s&&V.lcpStopTime)f=V.lcpStopTime-a,l=2;else if(function(){var t=!0;document.createElement("img").getBoundingClientRect||(t=!1);return t}()){var h=s?[]:V.imageResources||[],v=c.innerHeight,m=c.innerWidth;v||(v=c.document.documentElement.clientHeight),m||(m=c.document.documentElement.clientWidth);var g=[];h.length>0?i(h,(function(t){To(t.element,v,m)&&g.push(t)})):d(r.getEntriesByName)&&i(c.document.querySelectorAll("img"),(function(t){To(t,v,m)&&g.push({element:t})}));var y=(o&&o.loadEventEnd||Rn.loadEventEnd)-a;i(g,(function(e){if(e.loadTime){var n=e.loadTime-a;n>f&&(f=n,t.__fs=4)}else if(e.element&&e.element.src){var i=r.getEntriesByName(e.element.src);if(i&&i.length){var o=i[0];if(o){var s=o.responseEnd;o.fetchStart<=y&&s>f&&(f=s,t.__fs=3)}}}}))}f<=u&&(l=5,(f=u||0)<=0&&(f=0,l=0)),t.metric.fs=Math.round(f),t.debug.fs=l}function To(t,e,n){return t.src&&function(t){if(!t)return!1;if(!rn.fs_resources||0===rn.fs_resources.length)return!0;var e=!1;return i(rn.fs_resources,(function(n){if(t.indexOf(n)>-1)return e=!0,!1})),e}(t.src)&&function(t,e,n){if(t){var r=window.pageYOffset;if(t.top+(0===r?0:r||document.scrollTop||0)-(document.clientTop||0)>=e)return!1;var i=t.left;return i>=0&&i<n}return!1}(function(t){if(un())return d(t.getBoundingClientRect)?t.getBoundingClientRect():undefined;var e;try{e=t.getBoundingClientRect?t.getBoundingClientRect():undefined}catch(n){}return e}(t),e,n)&&!_o(t)}function So(t,e){var n=t.metric;n.loadEventEnd=n.le;var r=Zi(e),i=r.timing,o=r.startTime,a=r.context,s=r.ifr,c=0;if(a&&a.hasChildType(st))c=B()-o;else{var u,d=i&&i.loadEventEnd;u=s?d||B():d||Rn.loadEventEnd||B();var f=0;o>0&&u>o&&(f=u-o);var l=[n.fs,n.dr,n.fp,f];c=Math.max.apply(null,l)}n.le=Math.round(c)}function Ao(t){return t.loadEventEnd||t._end}function Co(t){var e=t.fp||0,n=0,r=window.performance&&window.performance.timing&&window.performance.timing.navigationStart;return r||(r=w,e=0),(n=B()-r-e)<0&&(n=0),n}function ko(t){var e={},n=(t.performance||{}).timing,r=t.TINGYUN&&t.TINGYUN.globalStart||w,o=t.TINGYUN&&t.TINGYUN.currentAgent||Rn;if(n){Pi((function(){var t=Ri.t={};i(n,(function(e,n){d(e)||(t[n]=e)}),!0)})),n.navigationStart&&(r=n.navigationStart),e={ns:r,f:h(yt),qs:h(bt),rs:h(wt),re:h(_t),os:h(Et),oe:h("domContentLoadedEventEnd"),oi:h("domInteractive"),oc:h("domComplete"),ls:h("loadEventStart"),le:h("loadEventEnd"),tus:h("unloadEventStart"),tue:h("unloadEventEnd")};var a=h(xt),s=h(Tt),c=h(St),u=h(At),f=h(Ct),l=h(kt);if(e.cs=f,e.ce=l,e.ds=a,e.de=s,(u-c>0||u>0)&&(e.es=c,e.ee=u),0==e.le){var p=Ao(o);e.ue=p-r}o&&(o._le=e.ue||e.le),n.secureConnectionStart?e.sl=h(Nt):e.sl=0}else e={t:r,le:Ao(o)-r};return e.je=o&&o.errs&&o.errs.length||0,e;function h(t){return n[t]>0?n[t]-r:0}}function No(t){t=t||{},this._capacity=t.capacity||10,this._cache={},this._cacheKeys=[],this._size=0}function Oo(t,e,n){if(t&&n&&d(n)){var r=t[e];if(!r||!r._wrapped){var i=n(r,e);return i&&(i._wrapped=!0),t[e]=i,i}}}function Io(t,e,n){try{if(d(Object.defineProperty))try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch(r){t[e]=n}else t[e]=n}catch(r){}}No.prototype.put=function(t,e){if(this._size>=this._capacity)try{var n=this._cacheKeys.shift();this._size--,this._cache[n]=null,delete this._cache[n]}catch(r){}this._cache[t]=e,this._cacheKeys.push(t),this._size++},No.prototype.get=function(t){return this._cache[t]};var Ro=[qt,Bt];function Po(t,e){return function(n){if(window.__TINGYUN.hook&&window.__TINGYUN.hook.eventCb&&jo(n)){var r={originalCallback:t,eventHandlerType:e};return window.__TINGYUN.hook.eventCb.call(this,arguments,r)}return t.apply(this,arguments)}}function Do(t){var e;return!function(t){return d(t)}(t)?function(t){return f(t)&&d(t.handleEvent)}(t)&&(e=2):e=1,{isValid:t&&e,listenerType:e}}function Lo(){try{window.EventTarget&&(Oo(window.EventTarget.prototype,"addEventListener",(function(t){return function(t){return function(){try{var e=arguments[0],n=arguments[1],r=arguments[2],i=!0;r&&f(r)&&r[jt]&&(i=!1);var o=Do(n),a=o.isValid,s=o.listenerType;if(i&&Ro.indexOf(e)>-1&&a&&1===s){var c=n.__TY_ELEMENT_CB;c||(Io(n,Qt,Po(n,Ut)),c=n.__TY_ELEMENT_CB),c&&(arguments[1]=c)}}catch(u){}return t&&t.apply(this,arguments)}}(t)})),Oo(window.EventTarget.prototype,"removeEventListener",(function(t){return function(t){return function(e,n){try{if(n&&Ro.indexOf(e)>-1){var r=n.__TY_ELEMENT_CB;if(r){var i=[].slice.call(arguments);i[1]=r,t.apply(this,i)}}}catch(o){}return t&&t.apply(this,arguments)}}(t)})))}catch(t){}}function jo(t){return t&&t.target instanceof window.HTMLElement&&t.currentTarget instanceof window.HTMLElement}var Ho=[qt,Bt],qo=[],Bo=new No({capacity:20}),Mo=null;function Uo(t){return!!t.match(Uo.regex)}function Fo(t){try{if(!t)return"";for(var e=[],n=t.parentNode,r=function(){var r,i=t.tagName,o=void 0;o=(r=n.children)?1===y(r,(function(t){return t.tagName===i})).length?i:"".concat(i,":nth-child(").concat(1+_(r,t),")"):i;var a=t.id?"#".concat(t.id):"",s=t.className;c(s)&&(s=di(s));var u="";if(s){var d=s.split(" ");d&&(u=y(d,(function(t){return di(t)})).map((function(t){return".".concat(t)})).join(""))}e.unshift("".concat(o).concat(a).concat(u)),n=(t=n).parentNode};n;)r();return"".concat(e.join(" > ")).toLowerCase()}catch(i){return""}}function zo(t,e,n){var r,i=t.target,o=i.nodeName,a=i.id,s=i.className,c=i.title,u=i.value,d=i.innerText,f=o+a,l=function(t){return!(null==t.isTrusted&&null==t.pointerType||t.isTrusted&&(null==t.pointerType||t.pointerType))}(t),p={type:at,id:a,nodeName:o,className:s,title:c,value:u,text:o===Gt?"":(r=d,r&&r.substr(0,256)||""),path:Fo(t.target),trigger:l?"script":"normal",range:"current"},h=t[Ht];if(h||(h=G(),t[Ht]=h),p.eventId=h,l){var v=t.timeStamp&&B();Mo&&Math.abs(v-Mo.timestamp)<=200&&(p.refId=Mo.eventId)}else Mo={timestamp:t.timeStamp&&B(),eventId:p.eventId};if("IMG"===o){var m=t.target.getAttribute("src");m&&!Uo(m)&&(p.src=m)}if("A"===o){var y=t.target.getAttribute("href");y&&(p.href=y)}return p.eventHandlerType=e,new ii(g({name:f,type:at,subType:t.type||qt,data:p},n))}function Go(t,e){K.context=zo(t,e)}function Yo(){var t=K.context;t&&t.canEnd()&&t.end(),K.context=null}function Vo(t,e){var n,r=e.originalCallback,i=e.eventHandlerType,o=t[0],a=!(o&&o.target&&Ho.indexOf(o.type)>-1);if(!a)try{Go.call(this,o,i)}catch(s){}try{n=r.apply(this,t)}finally{if(!a)try{K.context&&!K.context.canEnd({ignoreFields:[ct]})&&(o[Lt]=!0),Yo.apply(this)}catch(s){}}return n}function Jo(t){var e=window.performance&&window.performance.timing?window.performance.timing.navigationStart:w,n=t.timeStamp;return n=n?Li(n)?n:Math.round(t.timeStamp+e):B()}function Ko(t,e){return Math.abs(t-e)<rn.inline_event_associate_threshold}function Wo(t){var e=y(qo,(function(t){return!t[Lt]})),n=e[e.length-1];if(n){var r,i=Jo(n);if(Ko(i,t))return n[Ht]&&(r=Bo.get(n[Ht])),r||(r=zo(n,zt,{s:i}),n[Ht]&&Bo.put(n[Ht],r)),r}}function Xo(t){if(t){var e=qo[qo.length-1];if(e){var n=Jo(e);return Ko(n,t)?zo(e,zt,{s:n}):void 0}}}function Qo(){rn.hook_auto_event&&(window.__TINGYUN.hook&&(window.__TINGYUN.hook.eventCb=Vo),!window.__TINGYUN.listenerHooked&&window.HTMLElement&&(rn.hookEventListener&&Lo(),rn.hookOnProperty&&function(){try{if(!Object.getOwnPropertyDescriptor||!Object.defineProperty)return;i(Ro,(function(t){var e="on"+t,n=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,e);if(!n)return!0;var r=n.get,i=n.set;if(!r||!i)return!0;Object.defineProperty(window.HTMLElement.prototype,e,{get:function(){return r.apply(this,arguments)},set:function(){try{var t=arguments[0];t&&(arguments[0]=Po(t,Ft))}catch(e){}i.apply(this,arguments)},configurable:!0,enumerable:!0})}))}catch(t){}}()),rn.hook_inline_event&&i(Ho,(function(t){document.addEventListener(t,(function(t){qo.length>=5&&qo.shift(),qo.push(t)}),r({capture:!0},jt,!0))})))}Uo.regex=/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i;var $o="undefined"!=typeof window.console;var Zo=Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};function ta(t,e){this.flags=0,d(t.create)&&(this.create=t.create,this.flags|=1),d(t.before)&&(this.before=t.before,this.flags|=2),d(t.after)&&(this.after=t.after,this.flags|=4),d(t.error)&&(this.error=t.error,this.flags|=8),this.data=e}var ea,na=ta.prototype;function ra(t,e){return!ea||ea.flags<=0?t:function(t,e){var n=e||ea.data;if(!n&&0!=(1&ea.flags)){var r=ea.create(ea.data);r!==undefined&&(n=r)}return function(){var e;if(0!=(2&ea.flags)&&ea.before(this,n),rn.catchAsyncCallback){try{e=t.apply(this,arguments)}catch(r){throw 0!=(8&ea.flags)&&ea.error(n,r),r}0!=(4&ea.flags)&&ea.after(this,n)}else try{e=t.apply(this,arguments)}finally{0!=(4&ea.flags)&&ea.after(this,n)}return e}}(t,e)}function ia(t,e){return function(t){return function(){var e;try{e=t.apply(this,arguments)}finally{K.context=null}return e}}(ra(t,e))}function oa(){this.id=null,this.active=null,this._set=[]}function aa(){var t=new oa;return t.id=function(t,e){if(!ea){if(!f(t)||!t)throw new TypeError("callbacks arguments must be an object");return ea=new ta(t,e)}}({create:function(){return t.active},before:function(e,n){n&&t.enter(n)},after:function(e,n){n&&t.exit(n)},error:function(e,n){if(e){try{n.moduleId=e.moduleId}catch(r){}t.exit(e)}}}),t}na.create=na.before=na.after=na.error=null,oa.prototype={createContext:function(){return Zo(this.active)},getContext:function(){return this.active},get:function(t){if(this.active)return this.active[t]},set:function(t,e){if(this.active)return this.active[t]=e},enter:function(t){if(!t)throw new $e("context required!");this._set.push(this.active),this.active=t},exit:function(t){if(!t)throw new $e("context required!");if(t!==this.active){var e=this._set.lastIndexOf?this._set.lastIndexOf(t):function(t,e){var n=null==t?0:t.length;if(!n)return-1;for(var r=n;r--;)if(t[r]===e)return r;return r}(this._set,t);if(e<0)throw new $e("context not currently entered!");this._set.splice(e,1)}else this.active=this._set.pop()},bind:function(t,e){e||(e=this.active?this.active:this.createContext());var n=this;return function(){n.enter(e);try{return t.apply(this,arguments)}catch(i){try{var r="moduleId";i[r]=e[r]}catch(o){}throw i}finally{n.exit(e)}}}};var sa,ca=!1;var ua=(ca||(sa=aa(),ca=!0),sa),da="success",fa="fail",la={},pa={};function ha(t){var e=t,n=t.xhrs;e.hasAjax=n&&n.length>0,delete e.xhrs;var r={ss:1};t.type===Xt&&(r.rs=1),ii.buildImmediateAction(at,Mt,{type:at,items:n,spe:e},{sendOptions:{query:r}}),Wn(ke)}function va(t){if(pa[t.key]){var e=pa[t.key];delete pa[t.key],e.sent||!e.isMeaningfulAction()&&e.isNoRemain()?ha(t):(e.setSpe(t),U((function(){e.sent?Wn(ke):(e.spe=null,ha(t))}),1e4))}else ha(t)}function ma(t){$o&&console.warn(t||"Event key required!")}var ga=ma.prototype;function ya(t){t=t||{},this.key=t.key,this.type=t.type||"defined",this.timeout=t.timeout||6e5,this.status=1,this.remain=0,this.xhrs=[],this.s=B(),this.e=null,this.called=this.sent=this.stored=!1,t.debugInfo&&(this.debugInfo=t.debugInfo),this.duration=t.duration||0,t.op&&(this.op=t.op),t.desc&&(this.desc=t.desc),this.scope=new Ve({contexts:t.context})}ga.fail=ga.end=ga.store=q;var ba=ya.prototype;function wa(t){var e=(t=t||{}).key;if(!e)return new ma;if(la[e])return new ma("event "+e+" is executing");la[e]=!0;var n=ua.createContext();ua.enter(n);var r=new ya(t);return r._end=function(){var t=this;t.sent||t.stored||0!==t.remain||!t.called?t.stored&&this.refreshEventAndStore(n):t.finish().send(n)},r.end=function(t){t=t||{};var e=this;e.called?$o&&console.warn("Event "+this.key+"has ended or failed!"):(e.called=!0,ua.exit(n),null!=t.status&&(t.status===da?e.status=1:t.status===fa?e.status=0:1!==t.status&&0!==t.status||(e.status=t.status)),t.context&&f(t.context)&&e.scope.setContext(t.context),t.storeEvent||e._end())},r.finish=function(){var t=this;return t.e=B(),t.i&&clearTimeout(t.i),delete la[t.key],t},r.fail=function(t){this.end(g(t||{},{status:0}))},r.store=function(){this.end({storeEvent:!0}),this.refreshEventAndStore(n),this.stored=!0},r.setTag=function(t,e){this.scope&&this.scope.setTag(t,e)},r.setMetric=function(t,e,n){this.scope&&this.scope.setMetric(t,e,n)},r.type===Xt&&function(t){var e;e=K.context?ii.getRootContext(K.context,(function(t){return t.type===at&&t.subType!==Mt})):Wo(t.s),e&&!e.closed&&(pa[t.key]=e)}(r),ua.set("event",r),r}function _a(t){if(ui()){var e=Un(Ln(Wt));if(e&&e.start&&(!(t=t||{}).key||e.key===t.key)){var n=t.timeout;if(n||(n=6e4),e.duration=B()-e.start,e.duration>n)Hn(Wt);else{var r=window.performance&&window.performance.timing;if(r&&r.navigationStart&&(r.loadEventEnd||r.loadEventStart)&&r.navigationStart-e.start>=0){var i={method:"GET",url:rr.ref,status:200,type:st,subType:dt,startSpeOffset:r.navigationStart-e.start,start:r.navigationStart,__spe:1,du:(r.loadEventEnd||r.loadEventStart)-r.navigationStart};e.xhrs||(e.xhrs=[]),e.xhrs.push(i)}var o=1;t.status&&(o=t.status===da?1:0),e.status=o,Hn(Wt),va(e)}}}}function Ea(t,e){e.status&&e.status===fa?t.fail():t.end()}function xa(t,e){if(!ui())return new ma("Agent is not inited!");if(t){e=e||t.immediate;var n=wa(t=g({type:"auto"},e?{debugInfo:{immediate:!0}}:{},t||{}));if(e)Ea(n,t);else if(t.autoEnd){var r=t.endDelay;(!r||r<=0)&&(r=500),U((function(){Ea(n,t)}),r)}return n}}function Ta(t){var e=pa[t];if(e&&!e.closed)return e}ba.end=ba.finish=ba.fail=null,ba.send=function(t){this.sent=!0;var e=this.getEventData(t);!rn.collect_noajax_hashroute&&(e.debugInfo&&e.debugInfo.api===Zt||e.type===Xt&&e.key.indexOf("#")>-1)&&0===e.xhrs.length||e.duration>=this.timeout||(Ge({type:se,name:pe,args:{actionData:e},scope:this.scope}),We(e,this.scope),va(e))},ba.getEventData=function(t){var e=this,n=t.event&&t.event.xhrs||[];i(n,(function(t){t.startSpeOffset=t.start-e.s}));var r={key:e.key,start:e.s,duration:e.e-e.s,status:e.status,type:e.type,xhrs:n};return e.duration>0&&(r.duration=e.duration,r.start=e.e-e.duration),e.type===Xt&&rn.baseHref&&(r.baseHref=rn.baseHref),this.debugInfo&&(r.debugInfo=this.debugInfo),this.op&&(r.op=this.op),this.desc&&(r.desc=this.desc),r},ba.refreshEventAndStore=function(t){this.finish();var e=this.getEventData(t);jn(Wt,C(e))};var Sa,Aa,Ca,ka,Na,Oa,Ia,Ra,Pa,Da,La,ja,Ha,qa,Ba,Ma,Ua=window,Fa=(Aa=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t.charAt(n)]=n;return e}(Sa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ca=String.fromCharCode,ka=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?Ca(192|e>>>6)+Ca(128|63&e):Ca(224|e>>>12&15)+Ca(128|e>>>6&63)+Ca(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return Ca(240|e>>>18&7)+Ca(128|e>>>12&63)+Ca(128|e>>>6&63)+Ca(128|63&e)},Na=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Oa=function(t){return t.replace(Na,ka)},Ia=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[Sa.charAt(n>>>18),Sa.charAt(n>>>12&63),e>=2?"=":Sa.charAt(n>>>6&63),e>=1?"=":Sa.charAt(63&n)].join("")},Ra=Ua.btoa?function(t){return Ua.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,Ia)},Pa=function(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)?t.toString("base64"):Ra(Oa(String(t)))},Da=function(t,e){return e?Pa(String(t)).replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=/g,""):Pa(t)},La=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),ja=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return Ca(55296+(e>>>10))+Ca(56320+(1023&e));case 3:return Ca((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return Ca((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Ha=function(t){return t.replace(La,ja)},qa=function(t){var e=t.length,n=e%4,r=(e>0?Aa[t.charAt(0)]<<18:0)|(e>1?Aa[t.charAt(1)]<<12:0)|(e>2?Aa[t.charAt(2)]<<6:0)|(e>3?Aa[t.charAt(3)]:0),i=[Ca(r>>>16),Ca(r>>>8&255),Ca(255&r)];return i.length-=[0,0,2,1][n],i.join("")},Ba=Ua.atob?function(t){return Ua.atob(t)}:function(t){return t.replace(/\S{1,4}/g,qa)},{atob:function(t){return Ba(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},btoa:Ra,utob:Oa,encode:Da,encodeURI:function(t){return Da(t,!0)},btou:Ha,decode:function(t){return function(t){return Ha(Ba(t))}(String(t).replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))}}),za="__ty_plugin_registers";function Ga(){return Ma||(Ma={constant:{OBSERVER_SESSION:Oe,PAGEHIDE:$},util:{noop:q,on:L,support:pr,stringify:C,UUID:G,now:B,Base64:Fa},bridge:{getSid:qr,getUid:$n,getDid:Xn,registerObserver:jr,sendRequest:In,getUrlWithParam:Jn,getSendOrigin:ir,setDefaultConfig:Ir,getAgentConfig:Or,getAgentStorage:vr,setAgentStorage:hr},common:{agentVersion:"3.4.4-disney.1"}}),Ma}function Ya(t){try{if(c(t)){var e=t;t=function(t){var e=window.__ty_plugins;if(e&&d(e[t]))try{return e[t]()}catch(n){}}(t),t||function(t){window[za]&&window[za][t]||(window[za]||(window[za]={}),window[za][t]=Ya)}(e)}if(!t||!t.name)return;var n=t.name;if(K.plugins[n])return;if(K.plugins[n]=t,t.hooks&&(t.hooks.init&&Ue(ue,t.hooks.init),t.hooks.beforeSend&&ze(he,t.hooks.beforeSend),t.hooks.send&&ze(ve,t.hooks.send),t.hooks.action&&(o=t.hooks.action,d(o)&&i(He.action,(function(t){Fe(t,(function(e){o.call(null,{name:t,params:e})}))})))),ui()){var r=Ga();d(t.setup)&&t.setup(r),d(t.init)&&t.init(r)}}catch(a){}var o}var Va,Ja,Ka=["pushState","replaceState"];function Wa(t){if(rn.routerEnable){var e=window.location.href;if(e){var n=Va;Va=e,xa({key:e,autoEnd:!0,endDelay:rn.router_event_delay,type:Xt,debugInfo:{api:t}}),Xa(e,n)}}}function Xa(t,e){if(rn.bcHistoryEnabled&&t){var n={to:t};e&&(n.from=e),ci({category:"history",message:t,data:n})}}function Qa(){i(Ka,(function(t){Oo(window.history,t,(function(e){return function(n,r,i){var o;o=e.apply(this,arguments);try{Wa(t)}catch(a){}return o}}))})),L(window,te,(function(){Wa(te)}))}function $a(){L(window,Zt,(function(){Wa(Zt)}))}var Za={mainVersion:3,version:"3.4.4-disney.1",createEvent:xa,globalStart:w,currentAgent:Rn,mark:function(t,e){if(t){var n,r,i=t.split("_"),o=i[0],a=i[1];"ty"===o&&a&&(n=a,r={timestamp:B(),data:e},J[n]=r)}},wrapVueRouter:function(t,e){ui()&&(e&&f(e)||(e={}),t&&t.afterEach&&(rn.routerEnable=!1,t.afterEach((function(t){var n=t.fullPath;if(n=n?window.location.origin+n:t.path){var r={key:n,type:Xt,autoEnd:!0,endDelay:rn.router_event_delay,debugInfo:{api:"vueRouter"}};g(r,e),xa(r);var i=Ja;Ja=n,Xa(n,i)}}))))},setUid:Zn,createAutoEvent:xa,endStoreEvent:_a,endStoredAction:_a,captureException:function(t,e){return _i(t,e,je)},setDid:Qn,addHook:Me,addLifeCycleHook:Ue,addActionHook:Fe,addSendHook:ze,setContext:Ke,setExtraContext:function(){Je(),K.scope.setExtraContext.apply(K.scope,arguments)},stopLCPObserver:function(){V.lcpStopTime=B(),$i()},checkHookSupported:function(t,e){return He[t]&&_(He[t],e)>-1},newEvent:xi,createCustomEvent:xi,parseQuery:function(t){return Gn(zn(t))},JSON:{stringify:C,parse:Un},newAction:xa,getAgentConfig:Or,util:{uuid:G},startNextSession:function(t){Mr()?Fr(t,!1):oi(t),Wn("newSession",{id:qr()})},addPlugin:Ya};function ts(t,e){Za[t]=e}function es(t){if(t&&d(Za[t])){var e=[].slice.call(arguments,1);return Za[t].apply(null,e)}}function ns(){d(window.TingyunWeb)&&window.TingyunWeb.q&&(i(window.TingyunWeb.q,(function(t){if(!t)return!0;try{es.apply(null,t)}catch(e){}})),window.TingyunWeb.q=[]),window.TingyunWeb=es}function rs(){var t=[].slice.call(arguments);if(t&&t[0]===Pe)try{es.apply(null,t)}catch(e){}else rs.q.push(t)}var is=/(msie|trident)/i.test(an()),os=Ze.createElement("a");function as(t){var e=t;return is&&(os.setAttribute("href",e),e=os.href),os.setAttribute("href",e),{href:os.href,protocol:os.protocol?os.protocol.replace(/:$/,""):"",host:os.host,search:os.search?os.search.replace(/^\?/,""):"",hash:os.hash?os.hash.replace(/^#/,""):"",hostname:os.hostname,port:os.port,pathname:"/"===os.pathname.charAt(0)?os.pathname:"/"+os.pathname}}var ss=as(en.href);function cs(t){if(!c(t))return{valid:!1};var e=as(t);return{valid:e.protocol===ss.protocol&&e.host===ss.host,parsed:e}}function us(t){if(rn.apmEnableAllCorsDomains)return!0;var e,n,r=cs(t),o=r.valid,a=r.parsed;return o||a&&a.host&&(e=a.host,n=!1,i(rn.corsDomains,(function(t){if(e.indexOf(t)>-1)return n=!0,!1})),n)}function ds(t,e,n){if(t&&t[e])try{Oo(t,e,n)}catch(r){}}function fs(t,e,n){t&&t.context&&t.context.parent&&(t.pcid=t.context.parent.id,t.context.parent.updateRemain(1,e),t.context.parent.items.push(t.context.data),n&&t.context.parent.children.push(t.context))}function ls(t){if(!t)return!1;var e=rn.eventResources&&rn.eventResources.length>0,n=rn.eventResourcesIgnore&&rn.eventResourcesIgnore.length>0;return e&&n?ps(t)&&hs(t):e?ps(t):!n||hs(t)}function ps(t){var e=!1;return i(rn.eventResources,(function(n){if(t.indexOf(n)>-1)return e=!0,!1})),e}function hs(t){var e=!0;return i(rn.eventResourcesIgnore,(function(n){if(t.indexOf(n)>-1)return e=!1,!1})),e}function vs(t,e){var n,r=K.context;if(!(t.shouldAddToEvent||!function(t){return ii.containContext(t,(function(t){return t&&(t.type===dt||t.type===at&&t.subType!==Mt)}))}(r)&&r))return null;if(r)return r;if(un()){var i=Wo(t.start||B());if(i&&!(n=i.closed))return i}return!n&&e&&(r=e()),!r&&K.recordingPageLoadEvent&&K.pageLoadEvent&&(r=K.pageLoadEvent,K.recordingCpActions&&(t.crossPage=!0)),r}var ms=0,gs="load",ys=["__wvjb_queue_message__","__bridge_loaded__"];function bs(t,e,n){if(!function(t){if(!t)return!0;var e=!1,n=t.substring(0,100);try{i(ys,(function(t){if(n.indexOf(t)>-1)return e=!0,!1}))}catch(r){e=!0}return e}(e)&&t){n||(n=t.src?"reload":gs);var r,o={id:ms++,src:e,loadType:n,start:B(),sameOrigin:(r=e,cs(r).valid),shouldAddToEvent:ls(e)};!function(t){t.context||(t.context=new ii({parent:vs(t),name:"".concat(t.src,"-").concat(t.id),type:ut}))}(o),o.crossPage&&(o.context.crossPage=!0),o.context.setData({type:ut,loadType:o.loadType,id:o.id,cid:o.context.id,src:o.src,start:o.start,sameOrigin:o.sameOrigin}),fs(o,ut),t.addEventListener("load",(function i(){try{if(o.end=B(),o.sameOrigin&&this&&this.contentWindow&&this.contentWindow.document){o.url=this.contentWindow.document.URL;var e=this.contentWindow.TINGYUN,n=!1;e&&(o.pvid=e.pvid||"",d(e.checkHookSupported)&&e.checkHookSupported(se,de)&&(n=!0,e.addActionHook(de,(function(t){var e;t&&t.actionData&&(e=Es(t.actionData)),e||(e=_s(this.contentWindow,o.start)),ws(o,e)})))),n||ws(o,_s(this.contentWindow,o.start))}else ws(o);t.removeEventListener("load",i)}catch(r){}}))}}function ws(t,e){t.iframePageMetric=e,function(t){t.context.setData(g({pvid:t.pvid,end:t.end,url:t.url},t.iframePageMetric))}(t),function(t){if(!t.context)return;t.context.setData({state:mt}),t.context.canEnd()&&t.context.end()}(t)}function _s(t,e){if(!t)return{};var n=ko(t),r={metric:{le:n.le,f:n.f},debug:{}},i={wd:t,startTime:e,ifr:!0};return wo(r,i),xo(r,i),to(r,i),So(r,i),Es(r.metric)}function Es(t){if(t)return g({f:t.f,fp:t.fp,fs:t.fs,dr:t.dr,le:t.le,loadEventEnd:t.loadEventEnd,je:t.je||0},K.pageServerData)}function xs(){if(rn.hook_iframe&&un())try{!function(){function t(t){return function(e){try{"IFRAME"===e.nodeName&&e.src&&bs(e,e.src,gs)}catch(n){}return t.apply(this,arguments)}}window.Node&&(ds(window.Node.prototype,"appendChild",t),ds(window.Node.prototype,"insertBefore",t))}(),function(){if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var t=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,"src");if(t){var e=t.get,n=t.set;e&&n&&Object.defineProperty(HTMLIFrameElement.prototype,"src",{get:function(){return e.apply(this,arguments)},set:function(){try{if(Ze&&Ze.body&&Ze.body.contains&&Ze.body.contains(this))bs(this,arguments[0])}catch(t){}n.apply(this,arguments)},enumerable:!0,configurable:!0})}}}()}catch(t){}}var Ts=["IMG","SCRIPT","IFRAME"];function Ss(t){if(Ts.indexOf(t.nodeName)>-1&&ls(t.src)&&!_o(t)){var e=K.recentFinishedAjaxContext;if(e&&e.data){var n=B();if(n-e.data.end<=rn.resourceAssociateThreshold){var r=ii.getRootContext(e,(function(t){return t.type===dt||t.type===at&&!t.subType===Mt}));r&&r.addResource(t,n)}}}i(t.childNodes,Ss)}var As=null;function Cs(){i(Ze.getElementsByTagName("img"),(function(t){t.complete||t.__TY_IMAGE_LOAD_HOOK||(t.__TY_IMAGE_LOAD_HOOK=!0,L(t,W,(function(){V.imageResources.push({loadTime:B(),element:t})})))}))}function ks(){Yr.on(W,M((function(){t();var e=B();Pi((function(){Ri.load=e})),Rn.loadEventEnd=e,clearInterval(As)}))),i(pn(),(function(t){L(window,t,(function(e){Pi((function(){(Ri.e[t]||(Ri.e[t]=[])).push(B())})),Yr.emit(t,e)}))}));var t=M((function(){rn.monitor_dom_mutation&&function(){if(d(window.MutationObserver)){var t=document.getElementsByTagName("body"),e=t&&t[0];if(e)try{new MutationObserver((function(t){i(t,(function(t){i(t.addedNodes,Ss)}))})).observe(e,{childList:!0,subtree:!0})}catch(n){}}}();var t=B();if(Pi((function(){Ri.end=t})),Rn.domContentLoadedEventStart=t,un()&&window.performance&&window.performance.getEntriesByName){if(!Ze.querySelectorAll)return;V.resources=V.resources||[],i(Ze.querySelectorAll("head>link,head>script"),(function(t){var e;"LINK"==t.tagName?e=t.href:"SCRIPT"!=t.tagName||t.defer||t.async||(e=t.src),e&&V.resources.push(e)}))}}));if(un()&&L(Ze,"DOMContentLoaded",t),L(Ze,Z,(function(e){Ze.readyState===tt&&t()})),(!un()||window.performance&&!window.performance.getEntriesByName)&&(As=setInterval(Cs,60)),!un())try{!function(t){var e=Ze.createElement("script");e.type="text/javascript";try{e.appendChild(Ze.createTextNode(t))}catch(n){e.text=t}Ze.getElementsByTagName("head")[0].appendChild(e)}("if(window.TINGYUN) {window.TINGYUN.".concat($t,"=+new Date();}"))}catch(e){}}function Ns(){try{Bi(),Gi(),qi((function(){hn((function(){Gi()}))})),L(document,"visibilitychange",(function(t){"hidden"===document.visibilityState&&zi(t),Rn.visibilities&&Rn.visibilities.push({state:document.visibilityState,time:B()})}),!0),L(window,"pagehide",zi,!0),ks()}catch(t){}}function Os(t,e){for(var n=B(),r=e.length-1;r>=0;r--){var i=e[r];i.type===at||i.end||(i.end=n),e[r-1]&&(e[r-1].items=[i]);var o=void 0;o=i.start&&i.end&&i.end-i.start>rn.eventTimeout?gt:i.type===at&&e[r+1]&&e[r+1].state||mt,i.state=o}t.data=e[0],t.end=n}function Is(t){var e=K.cpParent;if(e){K.recordingCpActions=!1;var n=e.action,r=e.data,i=e.commonActionInfo,o=e.requestInfo;if(n&&r&&0!==r.length){r[r.length-1].items=[t.eventData.data],Os(n,r),n.data&&(n.data.range="crossPage");var a={pageParam:or()};K.opt_custom_param&&(a.cpOptCustomParam=K.opt_custom_param);var s=g(i||{},We(a,Xe(),"cpScope"));t.eventData=n,t.setSendOptions({commonActionInfoMessage:s,requestInfo:o,crossPage:!0})}}}var Rs=0,Ps=null;function Ds(t){if(t.parent){var e=Rs++,n=t.url||"",r=B(),i=new ii({parent:t.parent,name:"".concat(n,"-").concat(e),type:ft,subType:t.subType||"window_open"});i.setData({type:ft,subType:i.subType,id:e,cid:i.id,url:n,start:r});var o=i.collectCrossPageData();Ps=o,function(t){jn(Dt,C(t))}(o),i.clear(),i=null}}function Ls(t){return function(){var e=t.apply(this,arguments);try{if(e){var n=arguments[0],r=Xo(B());Ds({url:n,parent:r})}}catch(i){}return e}}function js(){i([qt,Bt],(function(t){Ze.addEventListener(t,(function(e){if(e&&e.target)try{var n=t===qt?function(t){return{valid:"A"===t.target.nodeName&&!t.defaultPrevented&&t.target.href,url:t.target.href,subType:"a_link"}}(e):function(t){return{valid:Gt===t.target.nodeName&&!t.defaultPrevented&&t.target.action,url:t.target.action,subType:"form_submit"}}(e);if(n.valid){var r=e.timeStamp&&function(t){var n;try{n=y(qo,(function(e){return e.timeStamp===t.timeStamp&&t.target.nodeName===e.target.nodeName}))[0]}catch(e){}if(n)return zo(n,zt,{s:Jo(n)})}(e);Ds({subType:n.subType,url:n.url,parent:r})}}catch(e){}}),r({},jt,!0))}))}function Hs(){!function(t){if(t){var e=t.action,n=t.data;e&&n&&0!==n.length&&(Os(e,n),Qr(e))}}(Ps),Ps=null}function qs(){rn.hook_cross_page&&(Oo(window,"open",Ls),js(),Ui((function(){Hs()})))}var Bs=[];function Ms(t){t&&(0===Bs.length&&L(document,qt,(function(t){i(Bs,(function(e){e(t)}))}),!0),Bs.push(t))}function Us(){if(rn.bcEnabled&&rn.bcDomEnabled&&Ms((function(t){try{if(!t)return;var e=t.target||t.srcElement;if(!e)return;var n=Jo(t),r=e.outerText||"";r&&(r=r.substring(0,50)),ci({timestamp:n,message:r,category:"dom",data:{path:Fo(e)}})}catch(t){console.log(t)}})),un())try{Qo(),qs()}catch(t){}}var Fs="traceparent";function zs(t){var e,n;do{e="",n=0;for(var r=0;r<t;r++){var i=Math.floor(16*Math.random()).toString(16);e+=i,"0"===i&&n++}}while(n===t);return e}var Gs={uniqueId:0},Ys={error:990,abort:905,timeout:903};function Vs(t){if(!rn.x_server_switch)return!1;var e=!1;try{if(t.sameOrigin=us(t.url),rn.key&&t.sameOrigin){var n=function(){try{return G(!0).substring(0,16)}catch(t){}}(),r="c=B|"+rn.key;n&&(r+=";x="+n),t.addHeader("X-Tingyun",r),e=!0,t.xTingyunSent=!0}try{t.sameOrigin&&!t.getHeader(Fs)&&t.addHeader(Fs,"00-".concat(zs(32),"-").concat(zs(16),"-01"))}catch(s){}if(rn.apmHeaders){var o,a=G(!0);i(rn.apmHeaders,(function(n){if(n){var r=t.getHeader(n);null==r&&rn.autoAddApmHeader&&t.sameOrigin&&(t.addHeader(n,a),e=!0,r=a),null!=r&&(o||(o={}),o[n]=r)}})),t.apms=o}}catch(s){}return e}function Js(t,e){t.context||(t.context=new ii({parent:vs(t,(function(){var t=ua.get("event");if(t&&t.type==Xt)return Ta(t.key)})),name:"".concat(t.url,"-").concat(t.id),type:st,subType:e||ge}),t.crossPage&&t.context.setData({crossPage:!0}))}function Ks(t,e){if(rn.x_server_switch){var n=t.context.data;if(t.apms&&(n.apms=t.apms),t.sameOrigin){var r=t.xTingyunSent?Un(e("X-Tingyun-Data")):null;if(r){if(n.hasServerHeader=!0,n.s_id=r.id,n.s_tname=r.tname,n.s_tid=r.tid,n.s_rid=r.rid,n.s_duration=r.duration,"user"in r){var i=r.user,o=i;if(null!=i&&0===i.indexOf(it)){var a=i.substring(it.length);try{o=Fa.decode(a)}catch(c){}}n.s_user=o,Zn(o)}"bid"in r&&(n.s_bid=Ci(r.bid)),"ber"in r&&(n.s_ber=r.ber),"isError"in r&&(n.s_isError=r.isError)}else n.hasServerHeader=!1;if(rn.serverTiming)try{var s=e("Server-Timing");s&&(n.st=s)}catch(c){}}}}function Ws(t){var e=t.context.data;t.key&&(e.__spe=1)}function Xs(t,e){K.context=t.context}function Qs(t){if(t.context){var e=!1;return t.context.setData({state:mt}),t.context.canEnd()&&(t.context.end(),e=!0),e}}function $s(t){if(!t||!t.context)return{};var e=t.context.data,n={method:e.method,url:e.url,start:e.start,end:e.end,du:e.du,status:e.status};return t.context.subType===ge?g(n,{err:e.err,rec:e.rec,send:e.send,requestHeader:t.headerRecord}):g(n,{requestHeader:t.fetchOptions.headers}),n}function Zs(t){var e=ua.get("event");if(e&&e.key){if(e.type===Xt){var n=Ta(e.key),r=ii.getRootContext(t.context,(function(t){return t.type===at&&t.subType!==Mt}));if(n&&r&&n.id!=r.id)return}t.key=e.key,e.remain++}}function tc(t){var e=!0;return i(rn.ajaxBlacklist,(function(n){if(n&&t.indexOf(n)>-1)return e=!1,!1})),e}function ec(t,e){var n={url:t.url,status_code:t.status,method:t.method,duration:t.du};t.apms&&(n.apms=t.apms),ci({type:"http",category:e,message:t.url,timestamp:t.start,data:n})}var nc={literal:{addHeader:function(t,e){this.fetchOptions.headers[t]=e},getHeader:function(t){return this.fetchOptions.headers[t]}},headers:{addHeader:function(t,e){this.fetchOptions.headers.append(t,e)},getHeader:function(t){return this.fetchOptions.headers.get(t)}},notSupport:{addHeader:q,getHeader:q}};function rc(t){var e=!0,n=!0;t.fetchOptions.headers||(e=!1,t.fetchOptions.headers={});var r=t.fetchOptions.headers;p(r)?g(t,nc.headers):f(r)?g(t,nc.literal):(n=!1,g(t,nc.notSupport)),t.hasOriginalHeaders=e,t.supportAddHeaders=n}function ic(t){if(this.headers)return this.headers.get(t)}function oc(t,n){if(t&&t.context){t.context.setData({end:t.end,du:t.status>0?t.end-t.start:0,status:t.status,state:mt});var r=t.context.data;r.err=n?0:Ys.error;var o={},a=Si(t.url);Ni(o,a.optCustomParams),o[2]=function(t){var e={};return i(rn.optCustomParamRules[2],(function(n){var r=t.getHeader(n);null!=r&&(e[n]=r)})),e}(t),n&&(o[4]=function(t){var e={};return i(rn.optCustomParamRules[4],(function(n){var r=t.headers.get(n);null!=r&&(e[n]=r)})),e}(n));var s=ki(o);s&&(r.opt_custom_param=s),Ks(t,e(ic,n||{})),Ws(t);var c={};if(rn.collectAllParam.URL&&a.operaAllParam&&(c.URL=a.operaAllParam),rn.collectAllParam.QH&&t.fetchOptions.headers&&(c.QH=t.fetchOptions.headers),rn.collectAllParam.RH&&n&&n.headers&&d(n.headers.entries)){var u={};i(n.headers,(function(t,e){u[e]=t})),c.RH=u}return Ti(c)||(r.opera_all_param=c),r}}function ac(t){var e={};return c(t)?e.url=t:g(e,function(t){if(!h(t)&&!f(t))return null;var e={};return t.url&&(e.url=t.url),t.method&&(e.method=t.method),t.headers&&(e.headers=t.headers),e}(t)),e}function sc(t,e){t&&e&&uc(t,null)}function cc(t){return function(){var e=this,n=m.call(arguments,0);return new Promise((function(r,i){var o={};n&&(o=ac(n[0]),n[1]&&g(o,ac(n[1])));var a,s,c=tc(o.url);if(c){if(rc(a={id:Gs.uniqueId++,method:o.method||Se,url:o.url,start:B(),fetchOptions:o,shouldAddToEvent:ls(o.url),scope:new Ve}),a.supportAddHeaders){var u=Vs(a);if(!a.hasOriginalHeaders&&u)try{n[1]||(n[1]={}),n[1].headers=a.fetchOptions.headers}catch(d){u=!1}a.headerAdded=u}Js(a,ye),Zs(a),a.context.setData({type:st,subType:ye,id:a.id,cid:a.context.id,method:a.method,url:a.url,start:a.start}),fs(a,st)}try{s=t.apply(e,n)}catch(d){return sc(a,c),void i(d)}s.then(ia((function(t){t&&c&&a&&uc(a,t),r(t)})),ia((function(t){sc(a,c),i(t)})))}))}}function uc(t,e){t.end=B(),t.status=e?e.status:0;var n=oc(t,e),r=$s(t);Ge({type:se,name:fe,args:{target:e||{},actionData:r},scope:t.scope}),r.st&&(n.st=r.st),We(n,t.scope);var i=ua.get("event");i&&i.key==t.key&&(i.xhrs.push(n),0==--i.remain&&i._end()),Qs(t),Rn.xhrs&&Rn.xhrs.push(n),rn.bcFetchEnabled&&ec(n,"fetch")}function dc(t,e,n){if(t&&t.context&&!t.composed){t.composed=!0;var r,o,a,s,d=Un(e),f={};f[2]=(r=n.headers||{},o={},i(rn.optCustomParamRules[2],(function(t){var e=r[t];null!=e&&(o[t]=e)})),o),f[3]=(a=n.requestData,s={},a&&u(a)&&a.length>0&&i(a,(function(t){var e=t;c(t)&&(e=Un(t)),g(s,Oi(e,rn.optCustomParamRules[3],!0))})),s);var l=ki(f),p={end:t.end,du:t.end-t.start,cb:t.cbTime,status:200,err:d&&null!=d.error?d.error:0,state:mt};l&&(p.opt_custom_param=l),t.context.setData(p)}}function fc(t){return t.context.data}function lc(t,e,n){var r=e;return function(e){t.end=B();var i,o=B();try{r&&(i=r.apply(this,arguments))}finally{var a=B();t.cbTime=a-o}dc(t,e,n),Ge({type:se,name:fe,args:{target:this,actionData:fc(t)},scope:t.scope}),We(t.context.data,t.scope);var s=ua.get("event");return s&&s.key==t.key&&(s.xhrs.push(t.context.data),0==--s.remain&&s._end()),Qs(t),i}}function pc(t){return function(){var e=arguments[0],n=arguments[1];if("rpc"===e&&n&&n.operationType){var r=arguments[2],i=Ce+n.operationType,o={id:Gs.uniqueId++,url:i,method:"",start:B(),shouldAddToEvent:ls(i),scope:new Ve};Js(o,be),Zs(o),o.context.setData({type:st,subType:be,id:o.id,cid:o.context.id,method:o.method,url:o.url,start:o.start}),fs(o,st),arguments[2]=lc(o,r,n)}try{return t.apply(self,arguments)}catch(a){}}}var hc=["css","link","script","img","other"],vc={},mc={},gc=!1;function yc(t,e){if(t[e]){for(var n=t[e].shift();n&&n.sent;)n=t[e].shift();return n&&!n.sent&&n.value?n:undefined}}function bc(t,e,n){if(n){t[e]||(t[e]=[]);var r={sent:!1,value:n};return t[e].push(r),r}}function wc(t){if(!t)return!1;if(!(t=function(t){var e=t.indexOf("://");if(e<0)return t;return t=t.substring(e+3)}(t)))return!1;var e=!1;return i(rn.monitorResources,(function(n){if(function(t,e){return!(!t||!e)&&(e.indexOf("*")<0&&e.indexOf("?")<0?t===e:function(t,e){for(var n=0,r=0,i=-1,o=0;n<t.length;)if(r<e.length&&(t[n]===e[r]||"?"===e[r]))n++,r++;else if(r<e.length&&"*"==e[r])i=r,o=n,r++;else{if(-1==i)return!1;r=i+1,n=++o}for(;r<e.length&&"*"==e[r];)r++;return r==e.length}(t,e))}(t,n))return e=!0,!1})),e}function _c(t){var e=t.url,n=t.error,r=t.res;if(e){var i,o,a,s,c,u;r&&!n?(o=(i=Di(r.startTime))+(a=Math.round(r.duration)),s=200,c=0,u=r.transferSize||0):(i=o=B(),a=0,s=0,c=Ys.error,u=0);var d={type:st,subType:we,method:Se,url:e,start:i,end:o,du:a,status:s,err:c,rec:u};ii.buildImmediateAction(st,we,d)}}function Ec(){new window.PerformanceObserver((function(t){try{i(t.getEntries(),(function(t){var e=function(t){if(!t)return{valid:!1};var e=t.initiatorType,n=t.name,r=_(hc,e)>-1,i=wc(n);return{url:n,valid:r&&i}}(t),n=e.url;if(e.valid){var r=yc(mc,n);if(r)_c({url:n,res:t,error:r.value}),r.sent=!0;else{var i=bc(vc,n,t);U((function(){i.sent||(_c({url:n,res:t,error:!1}),i.sent=!0)}))}}}))}catch(e){}})).observe({type:"resource",buffered:!0})}function xc(){L(Ze,"error",(function(t){if(t&&t.target){var e=t.target.src||t.target.href;if(e&&(Rn.resErrs&&Rn.resErrs.push({url:e,error:!0}),gc))try{var n=function(t){return wc(t)}(e);if(!n)return;var r=yc(vc,e);if(r)_c({url:e,res:r.value,error:!0}),r.sent=!0;else{var i=bc(mc,e,!0);U((function(){i.sent||(_c({url:e,error:!0}),i.sent=!0)}))}}catch(o){}}}),!0)}var Tc="onload",Sc="onreadystatechange",Ac={};function Cc(t,e){t._ty_rum=e.id,Ac[e.id]=e}function kc(t){return Ac[t._ty_rum]}function Nc(t){return!!t&&!t.__ign}function Oc(t){return{addHeader:function(e,n){try{t.setRequestHeader(e,n)}catch(r){}},getHeader:function(t){return this.headerRecord[t]}}}function Ic(e){return function(n,r){var i=this;if(!tc(r)&&i&&(i.__ign=!0),Nc(i)){var o={};o.method=n,o.url=r,o.id=Gs.uniqueId++,o.jserror=!1,o.headerRecord={},o.scope=new Ve,o.shouldAddToEvent=ls(r),g(o,Oc(i)),Js(o),Zs(o),o.context.setData({type:st,subType:ge,id:o.id,cid:o.context.id,method:o.method,url:o.url,state:o.state,jserror:o.jserror}),fs(o,st),o.toJSON=function(){return undefined},Cc(i,o)}try{return e.apply(i,arguments)}catch(a){}if(!un())return t(e,[i,arguments])}}function Rc(e){return function(n,r){var i,o=this;if(Nc(o)&&(i=kc(o))){var a=Bc(n,rn.optCustomParamRules);i&&a&&(i.reqHeaderParam||(i.reqHeaderParam={}),i.reqHeaderParam[n]=r),i.headerRecord||(i.headerRecord={}),i.headerRecord[n]=r}try{return e.apply(o,arguments)}catch(s){}if(!un())return t(e,[o,arguments])}}function Pc(e){return function(n){var r,i=this;Nc(i)&&(r=kc(i))&&(r.start=B(),r.reqSize=F(n),r.requestData=n,r.context.setData({start:r.start}),jc(i,r),Vs(r));try{return e.apply(i,arguments)}catch(o){}if(!un())return t(e,[i,arguments])}}function Dc(t,e,n){t&&(t.errorCode=e,t.errorEvent=n)}function Lc(t,e){un()&&(t.onload&&!t.__ty_xhr_hooked&&(Oo(t,Tc,e),t.__ty_xhr_hooked=!0,t[Yt]=Tc));var n=t.onreadystatechange;!n||t.__ty_xhr_hooked||n.__ty_xhr_hooked||(Oo(t,Sc,e),t.__ty_xhr_hooked=!0,t[Yt]=Sc)}function jc(t,e){var n=ua.getContext();function r(r){return ia((function(){var n,i;if(Hc(t,e),d(r))if(e&&4==t.readyState&&(i=B(),Xs(e)),rn.catchAsyncCallback)try{n=r.apply(this,arguments)}catch(o){throw e&&(e.jserror=!0),o}finally{e&&4==t.readyState&&(e.cbTime=B()-i)}else try{n=r.apply(this,arguments)}finally{e&&4==t.readyState&&(e.cbTime=B()-i)}return n}),n)}Lc(t,r);try{un()?function(t,e){i(Ys,(function(n,r){L(t,r,(function(){Dc(e,n,r),t&&t[Yt]===Tc&&Hc(t,e)}))}))}(t,e):function(t,e){i(Ys,(function(n,r){var i="on"+r;t[i]?Oo(t,i,(function(t){return function(){if(Dc(e,n,r),d(t))return t.apply(this,arguments)}})):t[i]=function(){Dc(e,n,r)}}))}(t,e)}catch(a){}if(!t.__ty_xhr_hooked){var o=ia((function(){t.__ty_xhr_hooked||4===t.readyState&&Hc(t,e)}),n);try{un()?L(t,Z,o):(t.onreadystatechange=o,t.onreadystatechange.__ty_xhr_hooked=!0)}catch(a){return}}hn((function(){Lc(t,r)}))}function Hc(t,n){if(n&&(n.end=B(),n.readyState=t.readyState,4==t.readyState)){if(n.callbackEnd)return;n.callbackEnd=!0,un()&&delete t.__ty_xhr_hooked,Xs(n),n.status=t.status,n.text=function(t){var e="";if(""==t.responseType||"text"==t.responseType)e=t.responseText;else if(t.response)e=t.response;else try{e=t.responseText}catch(n){}return e||""}(t),n.resSize=F(n.text);var r=function(t,n){if(!t||!t.context||t.composed)return;var r=t.status;g(t.context.data,{end:t.end,du:r>0?t.end-t.start:0,cb:t.cbTime||0,status:r,err:t.errorCode?t.errorCode:0,rec:t.resSize,send:t.reqSize,state:mt});var o=t.context.data,a={},s=Si(t.url);Ni(a,s.optCustomParams),a[2]=t.reqHeaderParam||{},a[3]=Oi(function(t){var e=Un(t);e||(r={},e=c(n=(n=t)||"")&&n?r=Gn(n):r);var n,r;return e}(t.requestData),rn.optCustomParamRules[3],!0),a[4]=function(t,e,n){var r={};return i(e[n||"3"],(function(e){var n=function(t,e){if(t&&t.getResponseHeader)try{return t.getResponseHeader(e)}catch(n){}}(t,e);null!=n&&Fn(r,e,n)})),r}(n,rn.optCustomParamRules,et);var u=Un(t.text);u&&(a[5]=Oi(u,rn.optCustomParamRules[5],!0));var d=ki(a);d&&(o.opt_custom_param=d);Ks(t,e(qc,n)),Ws(t);var f={};rn.collectAllParam.URL&&s.operaAllParam&&(f.URL=s.operaAllParam);rn.collectAllParam.QH&&t.headerRecord&&(f.QH=t.headerRecord);rn.collectAllParam.QB&&t.requestData&&(f.QB=t.requestData);if(rn.collectAllParam.RH)try{f.RH=function(t){if(!t)return{};var e=t.split(/\r?\n/),n={};return i(e,(function(t){if(!t)return!0;var e=t.indexOf(":");if(e>-1){var r=z(t.substring(0,e)),i=z(t.substring(e+1));r&&(n[r]=i)}})),n}(n.getAllResponseHeaders())}catch(l){}rn.collectAllParam.RB&&t.text&&(f.RB=t.text);Ti(f)||(o.opera_all_param=f);return t.composed=!0,o}(n,t),o=$s(n);if(Ge({type:se,name:fe,args:{target:t,actionData:o},scope:n.scope}),o.st&&(r.st=o.st),n.shouldAddToEvent&&(K.recentFinishedAjaxContext=n.context),Rn.xhrs){var a=r;try{t.responseURL&&(a=g({},r,{url:t.responseURL}))}catch(u){}Rn.xhrs.push(a)}var s=ua.get("event");hn((function(){!function(t,e){t&&e&&t.jserror&&(e.jserror=t.jserror);t.errorCode&&!e.err&&(e.err=t.errorCode);t.cbTime&&!e.cb&&(e.cb=t.cbTime);We(e,t.scope)}(n,r),s&&s.key==n.key&&(s.xhrs.push(r),0==--s.remain&&s._end()),Qs(n),function(t){try{Ac[t._ty_rum]=null,delete Ac[t._ty_rum]}catch(u){}}(t),rn.bcXhrEnabled&&ec(r,"xhr")}))}}function qc(t){return this.getResponseHeader(t)}function Bc(t,e){var n;return i(e[2],(function(e){if(t===e)return n=!0,!1})),n}function Mc(){rn.hookAjax&&(function(){if(rn.hookXhr){var t=tn&&tn.prototype;t?(Oo(t,"open",Ic),rn.hook_xhr_setrequestheader&&Oo(t,"setRequestHeader",Rc),Oo(t,"send",Pc)):tn&&(window.XMLHttpRequest=function(){var t=new tn;return Oo(t,"open",Ic),rn.hook_xhr_setrequestheader&&Oo(t,"setRequestHeader",Rc),Oo(t,"send",Pc),t})}}(),rn.hookFetch&&window.fetch&&window.Promise&&un()&&Oo(window,"fetch",cc),rn.hookMPaas&&window.AlipayJSBridge&&d(window.AlipayJSBridge.call)&&Oo(window.AlipayJSBridge,"call",pc),un()&&function(){if(xc(),rn.monitorResources&&0!==rn.monitorResources.length&&window.PerformanceObserver&&window.PerformanceObserver.supportedEntryTypes&&!(_(window.PerformanceObserver.supportedEntryTypes,"resource")<0)){gc=!0;try{Ec()}catch(t){}}}())}var Uc=["trace","debug","info","warn","error","log"];function Fc(){var e;rn.bcConsoleEnabled&&window.console&&(e=rn.bcParseConsoleParam?function(t){return gn(t)}:function(t){return null===t?"null":"object"===n(t)?"[object Object]":String(t)},i(Uc,(function(n){try{var r=window.console[n];if(!r)return;window.console[n]=function(){try{var o=[];i([].slice.call(arguments),(function(t){try{o.push(e(t))}catch(n){o.push("[?]")}}));var a=o.join(" ");if(a){var s=n;"log"===s&&(s="info"),a=a.substring(0,1024),ci({category:De,level:s,message:a})}}catch(c){}try{return r.apply(this,arguments)}catch(c){}if(!un())return t(r,[this,arguments])}}catch(o){}})))}function zc(){var t=window.onerror;window.onerror=function(e,n,r,i,o){if(wi(e,n,r,i,o),d(t))return t.apply(this,arguments)},window.onerror._ty=!0}function Gc(){var t=window.onerror;t&&t._ty||zc()}function Yc(t){var e,n,r,i,o;(t instanceof window.Event||window.ErrorEvent&&t instanceof window.ErrorEvent)&&(e=t.message||t.error&&(t.error.message||t.error.constructor.name)||"",n=t.lineno||0,r=t.colno||0,i=t.filename||t.error&&t.error.filename||t.target&&t.target.baseURI||"",o=t.error),wi(e,i,n,r,o)}function Vc(){if(rn.errorEnabled){var t=!document.addEventListener;t?zc():L(window,"error",Yc),Yr.on(W,(function(){t&&hn(Gc)}))}}function Jc(t,e){return t==="[object "+e+"]"}function Kc(t){if(t){var e;try{"reason"in t?e=t.reason:"detail"in t&&"reason"in t.detail&&(e=t.detail.reason)}catch(t){}if(e){var n=Object.prototype.toString.call(e);if(Jc(n,"ErrorEvent")&&e.error)Yc(e);else{var r,o=function(t,e){var n,r=!1;return i(e,(function(e){if(Jc(t,e))return n=e,r=!0,!1})),{typeName:n,ok:r}}(n,["Error","DOMException","DOMError"]),a=o.ok,s=o.typeName;if(a){if("stack"in e)return void _i(e,null,Le);var c=e.name||s;r=e.message?"".concat(c,": ").concat(e.message):c}r||(r=gn(e)),wi(r)}}}}function Wc(){rn.jsErrorEnabled&&(Yr.on(pn(),(function(){bi()})),setInterval(bi,1e4),Vc(),rn.unhandledrejectionEnabled&&L(window,"unhandledrejection",Kc))}function Xc(t,e){if("undefined"!=typeof nbsJsBridge&&nbsJsBridge.logJsResult){var n={rm:{},em:[],cpm:{}};e&&(n.rm.res=e.res||[]),t&&(n.cpm=t,n.cpm.ul=rr.ref),nbsJsBridge.logJsResult(C(n))}}var Qc="{0} not support";function $c(){if(!rn.pageServerData){var t=function(){var t={},e=function(t,e,n){if(!n)try{n=e&&window[e]||Ze.cookie||""}catch(i){}if(n){var r=n.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return r?r[3]:null}return null}(rt,nt);e&&(t=function(t){var e,n;if(t)if(0===t.indexOf(it)){var r=t.substring(it.length);try{e=Un(n=Fa.decode(r))}catch(i){}}else{try{e=Un(n=decodeURIComponent(t))}catch(i){}if(!e)try{e=Un(n=decodeURIComponent(n))}catch(i){Dn(i&&i.message)}}return e}(e),function(t,e,n,r,i){var o=t+"="+e;if(n){var a=new Date;a.setTime(a.getTime()+1e3*n),o+=";expires="+a.toGMTString()}r&&(o+=";path="+r),(i||Ze).cookie=o}(rt,"",-1e3,"/"));return t}(),e={};t&&f(t)&&(e.s_id=t.id,e.s_tname=t.tname,e.s_tid=t.tid,e.s_rid=t.rid,e.s_duration=t.duration,"user"in t&&(e.s_user=t.user,Zn(t.user)),"bid"in t&&(e.s_bid=Ci(t.bid)),"ber"in t&&(e.s_ber=t.ber),"isError"in t&&(e.s_isError=t.isError)),rn.pageServerData=e}}var Zc={},tu=[St,At,"workerStart",xt,Tt,Ct,kt,bt,wt,Nt,Ot,It,Rt],eu=0,nu=1,ru=2;function iu(t,e,n){var r={tt:a(Ze.title),charset:Ze.characterSet};Y.resources&&g(r,Y.resources),Pi((function(){Ti(n.resource.handler)||(Ri.resource=n.resource.statistic),r.debug=Ri})),Ii=!1;var o=Rn.errs;i(o,(function(t,n){var r=t.toObject();r.o=r.o-e&&e.navigationStart||w,o[n]=r})),r.err=o;var s,c="getEntriesByType";return t.getEntriesByType?s=t.getEntriesByType("resource"):Bn(b(Qc,[c])),s&&(r.res=[],i(s,(function(t){function e(e){var n=t[e];return n>0?n:0}var n=t.initiatorType,o=t.name,a={o:e("startTime"),rt:n,n:o,f:e(yt),ds:e(xt),de:e(Tt),cs:e(Ct),ce:e(kt),sl:e(Nt),qs:e(bt),rs:e(wt),re:e(_t),ts:t.transferSize||0,es:t.encodedBodySize||0,dbs:t.decodedBodySize||0};if(Ne===n||"fetch"===n){var s=n===Ne?ge:ye,c=ou(o,Rn.xhrs,s);c?(i(c,(function(t,e){0==e.indexOf("s_")&&(a[e]=t)})),c.st&&(a.st=c.st),c.apms&&(a.apms=c.apms),a.status=c.status,a.cb=c.cb,a.err=c.err,a.error=c.status>=400||c.err>0?nu:ru):a.error=eu}else{var u=ou(o,Rn.resErrs);a.error=u?nu:ru;var d=200;u?d=0:300===t.transferSize&&(d=304),a.status=d,a.err=u?Ys.error:0}a.cors=function(t){var e=!0;i(tu,(function(n){if(null!=t[n]&&0!==t[n])return e=!1,!1}));var n=!0;Pt in t&&(n=""===t.nextHopProtocol);return e&&n?nu:ru}(t),a.cached=function(t,e){if(e===nu)return eu;if(null==t.transferSize)return eu;return t.transferSize<=300?nu:ru}(t,a.cors),a.compressed=function(t,e){if(e===nu)return eu;if(null==t.encodedBodySize||null==t.decodedBodySize)return eu;return t.encodedBodySize<t.decodedBodySize?nu:ru}(t,a.cors),r.res.push(a)}))),r}function ou(t,e,n){var r,o;if(t)return i(e,(function(e,i){if(e&&t.indexOf(e.url)>-1&&(!n||e.subType===n))return r=e,o=i,!1})),r&&e.splice(o,1),r}function au(){var t={},e=0,n=window.performance;n&&n.getEntriesByType&&i(n.getEntriesByType("mark")||[],(function(n){if(n&&n.name&&n.startTime&&0===n.name.indexOf("ty_")){var r=n.name.substring("ty_".length);r&&(t[r]=Math.round(n.startTime),e+=1)}}));var r=n&&n.timing?n.timing.navigationStart:w,o=g({},window.__TINGYUN&&window.__TINGYUN.data||{},J||{});return o&&n&&n.timing&&i(o,(function(n,i){n&&f(n)&&n.timestamp&&(t[i]=n.timestamp-r,e+=1)})),e>0?t:null}function su(t,e,n){var r=g({},t||{},{type:dt,subType:n});return K.recordingCpActions&&(r.crossPage=!0),e&&(r.body=e),r}var cu=M((function(){if(Zc.overview){var t=g({},Zc.overview),e=Co(t);t.st=e;var n=su(t,null,vt);ii.buildImmediateAction(dt,vt,n)}})),uu=M((function(t){if(!K.pfSent){var e=window.performance,n=!!e,r=e&&e.timing;n||Bn(b(Qc,["pf"]));var o=g(ko(window),rn.pageServerData,Y),s={metric:{le:o.le},debug:{}};try{wo(s),to(s),xo(s),So(s,{context:t})}catch(w){}Pi((function(){Ri.calc=s.debug}));var c=g(o,s.metric),u=au();u&&i(u,(function(t,e){l(t)&&t>=0&&(c[e]=t)}));var d,f="",p=r?function(t){if(t){var e=t.fetchStart;if(e)return e-t.navigationStart}return undefined}(r):0;i(["fp","fs","dr","le"],(function(t){f+=(p?c[t]-p:c[t])>=rn[t+"_threshold"]?"1":"0"}));var h=!1;n&&f.indexOf("1")>-1&&(h=!0,d=iu(e,r,t),c.ressize=!(!e||!e.getEntriesByName)),u&&(d||(d={}),d.mark=u),c.trflag=f||"0000",V.pfStart=B(),delete c.firstScreenResources,delete c.resources,d||(d={tt:a(Ze.title),charset:Ze.characterSet});var v=K.pageUrlInfo||{};rn.collectAllParam.URL&&v.operaAllParam&&(d.opera_all_param={},d.opera_all_param.URL=v.operaAllParam),t._ctx.pageClose&&(c.st=Co(c)),Zc.overview=c;var m=go(h);m&&(d.webVitals=m),Rn.visibilities&&Rn.visibilities.length>0&&(d.vsby=Rn.visibilities);var y=su(c,d,ht);t.setSendOptions({query:{ps:1}}),g(t.eventData.data,y);try{Xc(c,d)}catch(w){}K.pfSent=!0,Rn.clear(),Ge({type:se,name:de,args:{actionData:y},scope:Xe()}),K.pageActionData=y}}));function du(t){K.recordingPageLoadEvent=!1,K.pageLoadEvent&&(t&&(K.pageLoadEvent._ctx.pageClose=!0),K.pageLoadEvent.endLock=!1,K.pageLoadEvent.end())}var fu=M((function(){K.pageLoadEvent&&(K.pageLoadEvent.closed?cu():(du(!0),K.pageLoadEvent.closed||K.pageLoadEvent.timeout()))}));function lu(){var t;$c(),t=Si(rr.ref),K.pageUrlInfo=t,t.optCustomParams&&(K.opt_custom_param=t.optCustomParams);try{rn.baseHref=(Ze.getElementsByTagName("base")[0]||{}).href}catch(n){}var e=window.screen;(e&&(rr.sh=e.height,rr.sw=e.width),rr.pvid=G(),ts("pvid",rr.pvid),rn.bcNavigationEnabled)&&ci({category:"navigation",timestamp:Zi().startTime,message:rr.ref})}function pu(){if(K.recordingPageLoadEvent=!0,K.pageLoadEvent=new ii({type:dt,subType:ht,endLock:!0}),K.pageLoadEvent.addPostComposer(uu),un()){var t=Un(Ln(Dt));t&&t.fromUrl&&Ze.referrer&&t.fromUrl.indexOf(Ze.referrer)>-1&&(K.recordingCpActions=!0,K.cpParent=t,K.pageLoadEvent.addPostComposer(Is)),Hn(Dt)}return function(){if(un()){var t=0;try{t=window.performance.timing.loadEventEnd}catch(e){}return t>0}return Ze.readyState===tt}()&&!K.pfSent&&du(),Yr.on(W,(function(){var t=0;if(rn.pfDelay&&f(rn.pfDelay)){var e=au();i(rn.pfDelay,(function(n,r){(!e||null==e[r])&&l(n)&&n>t&&(t=n)}))}K.pageLoadEvent&&!K.pageLoadEvent.hasChildType(st)&&rn.pageLoadDelay>t&&(t=rn.pageLoadDelay),U((function(){du()}),t)})).on(ln(),fu)}var hu=0,vu=0;function mu(t){if(B()-vu>300&&(hu=0),hu++,vu=B(),3===hu)try{xi({name:"rage_click",context:{path:Fo(t.target||t.srcElement)}})}catch(e){}}function gu(){!function(){if("undefined"!=typeof nbsJsBridge&&nbsJsBridge.context){var t=nbsJsBridge.context;null!=t.deviceId&&Qn(t.deviceId),null!=t.userId&&Zn(t.userId),Ke(t.context),K.nbsJsBridgeData=t}}(),vn()?Kn=function(t){window.webkit.messageHandlers.nbsBrowserAgent.postMessage(t)}:mn()&&(Kn=function(t){nbsJsBridge.postMessage(t)})}function yu(){var t;Je(),gu(),function(){if(!K.did){var t=Ln(Kt);t||(t=G(),jn(Kt,t)),K.did=t}if(!K.uid){var e=Ln(Vt);e&&(K.uid=e)}}(),ai(),rn.bcEnabled&&(ti=new si({maxSize:rn.bcMaxCacheSize})),lu(),yn=new kn,Ns(),pu(),Mc(),Wc(),rn.routerEnable&&("history"===rn.routerMode&&window.history?Qa():"hash"===rn.routerMode?$a():window.history?Qa():$a()),Us(),xs(),rn.monitorRage&&Ms(mu),bo(),Fc(),Rn._end=B(),Pi((function(){Ri._end=Rn._end})),t=rn.sendInterval,rn.sendInterval<1e3&&(t=1e3),setInterval((function(){Zr({tr:"timer"})}),t),Yr.on(ln(),(function(){Zr({tr:"pagehide"})}))}function bu(t){var e={};if(d(t)){var n={};t(n),e=n}else e={server:t};var r=e.server;window.__TINGYUN||(window.__TINGYUN={hook:{}});var o=Rr(r),a=o.config,s=o.configKey,c=o.storedConfig,u=o.valid,f=!ui();f&&u&&(i(a.plugins,(function(t){Ya(t)})),i(K.plugins,(function(t){if(!t||!d(t.setup))return!0;t.setup(Ga())})),yu(),window.TINGYUN.inited=!0,ui()&&i(K.plugins,(function(t){if(!t||!d(t.init))return!0;t.init(Ga())})),ns()),ui()&&(Ge({type:ae,name:ue,args:{firstInit:f,config:r}}),f&&br(s,c))}function wu(t){try{if(!t||!d(t)&&!f(t))return;bu(t)}catch(e){}}return window.TINGYUN&&3===window.TINGYUN.mainVersion?window.TINGYUN:(ts(Pe,wu),window.TINGYUN=Za,function(){if(!window.TingyunWeb)return window.TingyunWeb=rs,void(rs.q=[]);window.TingyunWeb.q&&i(window.TingyunWeb.q,(function(t,e){if(t&&t[0]===Pe){try{window.TingyunWeb.q.splice(e,1),es.apply(null,t)}catch(n){}return!1}}))}(),Za)}();

!function(){window.TINGYUN&&window.TINGYUN.init&&window.TINGYUN.init({"domain":"web.tingyun.shanghaidisneyresort.com:8588","token":"8b30d24375144b51be68e4969e80851b","key":"HbcU1jPXOQY","id":"VLw6nMkIkVw","page":{"fpThreshold":3000},"operation":{"rageClickEnabled":false},"replay":{"sampleRate":0.1}})}();/*TY_AGENT_END*/